
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.1-github-snapshot-2013.06.28-08.53.11.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}window.cytoscape=cytoscape})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}
},array:function(b){return b!=null&&b instanceof Array},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(z){var u;var k=a.util.regex.number;var o,A,j,w,c,t,v;var i=new RegExp("^"+a.util.regex.hsla+"$").exec(z);if(i){o=parseInt(i[1]);if(o<0){o=(360-(-1*o%360))%360}else{if(o>360){o=o%360}}o/=360;A=parseFloat(i[2]);if(A<0||A>100){return}A=A/100;j=parseFloat(i[3]);if(j<0||j>100){return
}j=j/100;w=i[4];if(w!==undefined){w=parseFloat(w);if(w<0||w>1){return}}if(A===0){c=t=v=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return h}var d=j<0.5?j*(1+A):j+A-j*A;var e=2*j-d;c=Math.round(255*f(e,d,o+1/3));t=Math.round(255*f(e,d,o));v=Math.round(255*f(e,d,o-1/3))}u=[c,t,v,w]}return u},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^"+a.util.regex.rgba+"$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};
a.util.regex={};a.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)";a.util.regex.rgba="rgb[a]?\\(("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";a.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hsla="hsl[a]?\\(("+a.util.regex.number+")\\s*,\\s*("+a.util.regex.number+"[%])\\s*,\\s*("+a.util.regex.number+"[%])(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";
a.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+a.util.regex.number+")\\s*,\\s*(?:"+a.util.regex.number+"[%])\\s*,\\s*(?:"+a.util.regex.number+"[%])(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hex3="\\#[0-9a-fA-F]{3}";a.util.regex.hex6="\\#[0-9a-fA-F]{6}"})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(o,j,v,k,r,i,p,h,l,f,m){var w=Math.min(o,v)-m;var t=Math.min(j,k)-m;var u=Math.max(o,v)+m;var s=Math.max(j,k)+m;if(r>=w&&r<=u&&i>=t&&i<=s){return 2}else{if(l>=w&&l<=u&&f>=t&&f<=s){return 2
}else{if(p>=w&&p<=u&&h>=t&&h<=s){return 1}}}var g=Math.min(r,p,l);var e=Math.min(i,h,f);var d=Math.max(r,p,l);var c=Math.max(i,h,f);if(g>u||d<w||e>s||c<t){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(s,k,B,o,u,g,t,d,r){var C=Math.min(s,B)-r;var z=Math.min(k,o)-r;var A=Math.max(s,B)+r;var w=Math.max(k,o)+r;var h=t-u;var m=u;var v;var e=d-g;var l=g;var p;if(Math.abs(h)<0.0001){return(u>=C&&u<=A&&Math.min(g,d)<=z&&Math.max(g,d)>=w)}var c=(C-m)/h;if(c>0&&c<=1){v=e*c+l;if(v>=z&&v<=w){return true
}}var j=(A-m)/h;if(j>0&&j<=1){v=e*j+l;if(v>=z&&v<=w){return true}}var f=(z-l)/e;if(f>0&&f<=1){p=h*f+m;if(p>=C&&p<=A){return true}}var i=(w-l)/e;if(i>0&&i<=1){p=h*i+m;if(p>=C&&p<=A){return true}}return false};b.math.checkBezierCrossesBox=function(z,h,M,B,r,V,l,S,j,P,d){var t=Math.min(z,M)-d;var p=Math.min(h,B)-d;var U=Math.max(z,M)+d;var R=Math.max(h,B)+d;if(r>=t&&r<=U&&V>=p&&V<=R){return true}else{if(j>=t&&j<=U&&P>=p&&P<=R){return true}}var w=r-2*l+j;var g=-2*r+2*l;var I=r;var C=[];if(Math.abs(w)<0.0001){var N=(t-r)/g;
var A=(U-r)/g;C.push(N,A)}else{var F=g*g-4*w*(I-t);var u,s;if(F>0){var G=Math.sqrt(F);u=(-g+G)/(2*w);s=(-g-G)/(2*w);C.push(u,s)}var E=g*g-4*w*(I-U);var o,k;if(E>0){var G=Math.sqrt(E);o=(-g+G)/(2*w);k=(-g-G)/(2*w);C.push(o,k)}}C.sort(function(X,W){return X-W});var v=V-2*S+P;var e=-2*V+2*S;var H=V;var L=[];if(Math.abs(v)<0.0001){var f=(p-V)/e;var J=(R-V)/e;L.push(f,J)}else{var m=e*e-4*v*(H-p);var c,T;if(m>0){var G=Math.sqrt(m);c=(-e+G)/(2*v);T=(-e-G)/(2*v);L.push(c,T)}var i=e*e-4*v*(H-R);var Q,O;if(i>0){var G=Math.sqrt(i);
Q=(-e+G)/(2*v);O=(-e-G)/(2*v);L.push(Q,O)}}L.sort(function(X,W){return X-W});for(var D=0;D<C.length;D+=2){for(var K=1;K<L.length;K+=2){if(C[D]<L[K]&&L[K]>=0&&C[D]<=1&&C[D+1]>L[K-1]&&L[K-1]<=1&&C[D+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,u,e,t,d,s,c,B){var k=0.25*u+0.5*t+0.25*s;var j=0.25*e+0.5*d+0.25*c;var o,m,z,v;var g,f,l;var A=function(D,J,E,C,I,H,F,G){g=(H-C)*(D-E)+(E-I)*(J-C);f=g*g;sideSquared=(H-C)*(H-C)+(E-I)*(E-I);if(G){if(g>0){return false}}else{if(g<0){return false
}}return(f/sideSquared>F)};var r=(k+t)/2;var p=(j+d)/2;var w=true;if(A(r,p,u,e,t,d,0,w)){w=!w}return(!A(i,h,u,e,t,d,B,w)&&!A(i,h,t,d,s,c,B,w)&&!A(i,h,s,c,u,e,B,w))};b.math.solveCubic=function(o,m,l,k,v){m/=o;l/=o;k/=o;var f,g,e,i,u,p,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;v[1]=0;h=(m/3);if(f>0){u=e+Math.sqrt(f);u=((u<0)?-Math.pow(-u,(1/3)):Math.pow(u,(1/3)));p=e-Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));v[0]=-h+u+p;h+=(u+p)/2;v[4]=v[2]=-h;h=Math.sqrt(3)*(-p+u)/2;
v[3]=h;v[5]=-h;return}v[5]=v[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));v[0]=-h+2*j;v[4]=v[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);v[0]=-h+j*Math.cos(i/3);v[2]=-h+j*Math.cos((i+2*Math.PI)/3);v[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(r,p,w,j,v,h,u,g){var E=1*w*w-4*w*v+2*w*u+4*v*v-4*v*u+u*u+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;var D=1*9*w*v-3*w*w-3*w*u-6*v*v+3*v*u+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var B=1*3*w*w-6*w*v+w*u-w*r+2*v*v+2*v*r-u*r+3*j*j-6*j*h+j*g-j*p+2*h*h+2*h*p-g*p;
var A=1*w*v-w*w+w*r-v*r+j*h-j*j+j*p-h*p;a("coefficients: "+E/E+", "+D/E+", "+B/E+", "+A/E);var k=[];this.solveCubic(E,D,B,A,k);var e=1e-7;var C=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){C.push(k[l])}}C.push(1);C.push(0);var f=-1;var z;var o,m,s;for(var t=0;t<C.length;t++){o=Math.pow(1-C[t],2)*w+2*(1-C[t])*C[t]*v+C[t]*C[t]*u;m=Math.pow(1-C[t],2)*j+2*(1-C[t])*C[t]*h+C[t]*C[t]*g;s=Math.pow(o-r,2)+Math.pow(m-p,2);a("distance for param "+C[t]+": "+Math.sqrt(s));if(f>=0){if(s<f){f=s;
z=C[t]}}else{f=s;z=C[t]}}a("given: ( "+r+", "+p+"), ( "+w+", "+j+"), ( "+v+", "+h+"), ( "+u+", "+g+")");a("roots: "+k);a("params: "+C);a("closest param: "+z);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,g){var i;if(a.is.core(b)){i=b}else{if(a.is.domElement(b)){g=b}}var f=a.getRegistrationForInstance(b,g);if(f){if(!f.cy){f.cy=b;f.domElement=g}else{a.util.error("Tried to register on a pre-existing registration")
}return f}else{var e=+new Date;var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;d=a.instanceCounter;var h="cy-"+e+"-"+d;var c={id:h,cy:i,domElement:g,readies:[]};a.instances.push(c);a.instances[h]=c;return c}};a.removeRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){g=b}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g._private.instanceId;delete a.instances[f];a.instances.splice(f,1)}else{if(a.is.domElement(e)){for(var c=0;
c<a.instances.length;c++){var d=a.instances[c];if(d.domElement===e){delete a.instances[d.id];a.instances.splice(c,1);c--}}}}};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g._private.instanceId;return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;
function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)
}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});
cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var o=l.cy;var m=h;if(o&&a.is.fn(o[m])){var i=o[m].apply(o,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)
}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;
var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,t){var g=c;var A=this;var f=A.length!==undefined;var u=f?A:[A];var z=f?A[0]:A;if(a.is.string(e)){if(g.allowGetting&&t===undefined){var r;if(z){r=z._private[g.field][e]}return r}else{if(g.allowSetting&&t!==undefined){var d=!g.immutableKeys[e];if(d){for(var o=0,h=u.length;o<h;o++){u[o]._private[g.field][e]=t}if(g.updateMappers){A.updateMappers()}if(g.settingTriggersEvent){A[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,w;for(j in m){w=m[j];var d=!g.immutableKeys[j];if(d){for(var o=0,h=u.length;o<h;o++){u[o]._private[g.field][j]=w}}}if(g.updateMappers){A.updateMappers()}if(g.settingTriggersEvent){A[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var s=e;A.bind(g.bindingEvent,s)}else{if(g.allowGetting&&e===undefined){var r;if(z){r=z._private[g.field]}return r}}}}return A}},batchData:function(d){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
var b=d=a.util.extend({},c,d);return function(f){var t=this;var h=t.length!==undefined;var w=h?t:t._private.elements;if(w.length===0){return t}var j=h?w[0]._private.cy:t;for(var o=0;o<w.length;o++){var u=w[o];var g=u._private.data.id;var s=f[g];if(s!==undefined&&s!==null){var m=s;var l,p;for(l in m){p=m[l];var e=!b.immutableKeys[l];if(e){u._private[b.field][l]=p}}}}var r=new a.Collection(j,w);if(b.updateMappers){r.updateMappers()}r[b.triggerFnName](b.event);return t}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(r){var g=c;var w=this;var f=w.length!==undefined;var s=f?w:[w];var u=f?w[0]:w;if(a.is.string(r)){var v=r.split(/\s+/);var j=v.length;for(var k=0;k<j;k++){var t=v[k];if(a.is.emptyString(t)){continue}var e=!g.immutableKeys[t];if(e){for(var o=0,h=s.length;o<h;o++){delete s[o]._private[g.field][t]}}}if(g.triggerEvent){w[g.triggerFnName](g.event)}}else{if(r===undefined){for(var o=0,h=s.length;o<h;o++){var m=s[o]._private[g.field];for(var t in m){var d=!g.immutableKeys[t];
if(d){delete m[t]}}}if(g.triggerEvent){w[g.triggerFnName](g.event)}}}return w}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,v,C,k){var s=this;var d=s.length!==undefined;var f=d?s:[s];var A=d?s[0]:s;var z=a.is.string(e);var t=c;if(a.is.plainObject(v)){k=C;C=v;v=undefined}else{if(a.is.fn(v)||v===false){k=v;
C=undefined;v=undefined}}if(a.is.fn(C)||C===false){k=C;C=undefined}if(!(a.is.fn(k)||k===false)&&z){return s}if(z){var B={};B[e]=k;e=B}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var w=0;w<l.length;w++){var r=l[w];if(a.is.emptyString(r)){continue}var m=r.match(a.define.event.regex);if(m){var g=m[1];var o=m[2]?m[2]:undefined;var h={callback:k,data:C,delegated:v?true:false,selector:v,type:g,namespace:o,unbindSelfOnTrigger:t.unbindSelfOnTrigger,unbindAllBindersOnTrigger:t.unbindAllBindersOnTrigger,binders:f};
for(var u=0;u<f.length;u++){f[u]._private.listeners.push(h)}}}}return s}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,C,l){var u=this;var d=u.length!==undefined;var f=d?u:[u];var G=d?u[0]:u;var F=a.is.string(e);var v=c;if(arguments.length===0){for(var D=0;D<f.length;D++){f[D]._private.listeners=[]}return u}if(a.is.fn(C)||C===false){l=C;C=undefined}if(F){var I={};I[e]=l;e=I}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var E=0;E<m.length;
E++){var t=m[E];if(a.is.emptyString(t)){continue}var o=t.match(a.define.event.optionalTypeRegex);if(o){var g=o[1]?o[1]:undefined;var s=o[2]?o[2]:undefined;for(var D=0;D<f.length;D++){var w=f[D]._private.listeners;for(var B=0;B<w.length;B++){var k=w[B];var r=!s||s===k.namespace;var z=!g||k.type===g;var A=!l||l===k.callback;var H=r&&z&&A;if(H){w.splice(B,1);B--}}}}}}return u}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(G,g,B){var r=this;var w=r.length!==undefined;var C=w?r:[r];
var H=w?r[0]:r;var M=a.is.string(G);var h=a.is.plainObject(G);var f=a.is.event(G);var U=c;var D=this._private.cy||this;if(M){var O=G.split(/\s+/);G=[];for(var Z=0;Z<O.length;Z++){var J=O[Z];if(a.is.emptyString(J)){continue}var o=J.match(a.define.event.regex);var ae=o[1];var P=o[2]?o[2]:undefined;G.push({type:ae,namespace:P})}}else{if(h){var ab=G;G=[ab]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var Z=0;Z<G.length;Z++){var s=G[Z];for(var Y=0;Y<C.length;Y++){var N=C[Y];var S=N._private.listeners;
var d=a.is.element(N);var F=d;var J;if(f){J=s;J.cyTarget=J.cyTarget||N;J.cy=J.cy||D;J.namespace=J.namespace||s.namespace}else{J=new a.Event(s,{cyTarget:N,cy:D,namespace:s.namespace});var I=a.define.event.props;for(var X=0;X<I.length;X++){var A=I[X];J[A]=s[A]}}if(B){S=[{namespace:J.namespace,type:J.type,callback:B}]}for(var X=0;X<S.length;X++){var e=S[X];var Q=!e.namespace||e.namespace===J.namespace;var z=e.type===J.type;var R=e.delegated?(N!==J.cyTarget&&a.is.element(J.cyTarget)&&J.cyTarget.is(e.selector)):(true);
var K=Q&&z&&R;if(K){var T=[J];T=T.concat(g);if(e.data){J.data=e.data}else{J.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){S.splice(X,1);X--}if(e.unbindAllBindersOnTrigger){var v=e.binders;for(var W=0;W<v.length;W++){var u=v[W];if(!u||u===N){continue}var E=u._private.listeners;for(var V=0;V<E.length;V++){var ac=E[V];if(ac===e){E.splice(V,1);V--}}}}var ad=e.delegated?J.cyTarget:N;var L=e.callback.apply(ad,T);if(L===false||J.isPropagationStopped()){F=false;if(L===false){J.stopPropagation();
J.preventDefault()}}}}if(F){var t=N.parent();var aa=t.length!==0;if(aa){t=t[0];t.trigger(J)}else{D.trigger(J)}}}}return r}}}})(cytoscape);(function(b,c){var a=("ontouchstart" in c)||c.DocumentTouch&&document instanceof DocumentTouch;b.Style=function(d){if(!(this instanceof b.Style)){return new b.Style(d)}if(!b.is.core(d)){b.util.error("A style must have a core reference");return}this._private={cy:d,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};b.style=b.Style;b.styfn=b.Style.prototype;
b.fn.style=function(d,e){for(var g in d){var f=d[g];b.Style.prototype=f}};b.stylesheet=b.Stylesheet=function(){if(!(this instanceof b.Stylesheet)){return new b.Stylesheet()}this.length=0};b.Stylesheet.prototype.selector=function(d){var e=this.length++;this[e]={selector:d,properties:[]};return this};b.Stylesheet.prototype.css=function(f,h){var g=this.length-1;if(b.is.string(f)){this[g].properties.push({name:f,value:h})}else{if(b.is.plainObject(f)){map=f;for(var e=0;e<b.style.properties.length;e++){var k=b.style.properties[e];
var d=map[k.name];if(d===undefined){d=map[b.util.dash2camel(k.name)]}if(d!==undefined){var f=k.name;var h=d;this[g].properties.push({name:f,value:h})}}}}return this};b.Stylesheet.prototype.generateStyle=function(m){var k=new b.Style(m);for(var g=0;g<this.length;g++){var f=this[g];var d=f.selector;var h=f.properties;k.selector(d);for(var e=0;e<h.length;e++){var l=h[e];k.css(l.name,l.value)}}return k};b.Stylesheet.prototype.assignToStyle=function(l,e){l.clear();if(e||e===undefined){l.addDefaultStylesheet()
}for(var h=0;h<this.length;h++){var g=this[h];var d=g.selector;var k=g.properties;l.selector(d);for(var f=0;f<k.length;f++){var m=k[f];l.css(m.name,m.value)}}};(function(){var f=b.util.regex.number;var g=b.util.regex.rgbaNoBackRefs;var e=b.util.regex.hslaNoBackRefs;var l=b.util.regex.hex3;var k=b.util.regex.hex6;b.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:true,allowPercent:true},positiony:{enums:["top","center","bottom"],number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+f+"|\\w+|"+g+"|"+e+"|"+l+"|"+k+")\\s*\\,\\s*("+f+"|\\w+|"+g+"|"+e+"|"+l+"|"+k+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};
var m=b.style.types;b.style.properties=[{name:"cursor",type:m.cursor},{name:"text-valign",type:m.valign},{name:"text-halign",type:m.halign},{name:"color",type:m.color},{name:"content",type:m.text},{name:"text-outline-color",type:m.color},{name:"text-outline-width",type:m.size},{name:"text-outline-opacity",type:m.zeroOneNumber},{name:"text-opacity",type:m.zeroOneNumber},{name:"text-decoration",type:m.textDecoration},{name:"text-transform",type:m.textTransform},{name:"font-family",type:m.fontFamily},{name:"font-style",type:m.fontStyle},{name:"font-variant",type:m.fontVariant},{name:"font-weight",type:m.fontWeight},{name:"font-size",type:m.size},{name:"min-zoomed-font-size",type:m.size},{name:"visibility",type:m.visibility},{name:"opacity",type:m.zeroOneNumber},{name:"z-index",type:m.nonNegativeInt},{name:"overlay-padding",type:m.size},{name:"overlay-color",type:m.color},{name:"overlay-opacity",type:m.zeroOneNumber},{name:"background-color",type:m.color},{name:"background-opacity",type:m.zeroOneNumber},{name:"background-image",type:m.url},{name:"background-position-x",type:m.positionx},{name:"background-position-y",type:m.positiony},{name:"background-repeat",type:m.bgRepeat},{name:"background-size-x",type:m.bgSize},{name:"background-size-y",type:m.bgSize},{name:"border-color",type:m.color},{name:"border-opacity",type:m.zeroOneNumber},{name:"border-width",type:m.size},{name:"border-style",type:m.lineStyle},{name:"height",type:m.size},{name:"width",type:m.size},{name:"padding-left",type:m.size},{name:"padding-right",type:m.size},{name:"padding-top",type:m.size},{name:"padding-bottom",type:m.size},{name:"shape",type:m.nodeShape},{name:"source-arrow-shape",type:m.arrowShape},{name:"target-arrow-shape",type:m.arrowShape},{name:"source-arrow-color",type:m.color},{name:"target-arrow-color",type:m.color},{name:"line-style",type:m.lineStyle},{name:"line-color",type:m.color},{name:"control-point-step-size",type:m.size},{name:"curve-style",type:m.curveStyle},{name:"selection-box-color",type:m.color},{name:"selection-box-opacity",type:m.zeroOneNumber},{name:"selection-box-border-color",type:m.color},{name:"selection-box-border-width",type:m.size},{name:"panning-cursor",type:m.cursor},{name:"active-bg-color",type:m.color},{name:"active-bg-opacity",type:m.zeroOneNumber},{name:"active-bg-size",type:m.size}];
var j=b.style.properties;for(var h=0;h<j.length;h++){var d=j[h];j[d.name]=d}})();b.styfn.addDefaultStylesheet=function(){var d=this.containerPropertyAsString("font-family")||"sans-serif";var j=this.containerPropertyAsString("font-style")||"normal";var g=this.containerPropertyAsString("font-variant")||"normal";var f=this.containerPropertyAsString("font-weight")||"normal";var e=this.containerPropertyAsString("color")||"#000";var k=this.containerPropertyAsString("text-transform")||"none";var i=this.containerPropertyAsString("text-decoration")||"none";
var h=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:e,content:undefined,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":k,"font-family":d,"font-style":j,"font-variant":g,"font-weight":f,"font-size":h,"min-zoomed-font-size":0,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":0.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1,}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":0.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":0.15,"active-bg-size":a?40:15})
};b.styfn.clear=function(){this._private.newStyle=true;for(var d=0;d<this.length;d++){delete this[d]}this.length=0;return this};b.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};b.styfn.core=function(){return this._private.coreStyle};b.styfn.parse=function(E,w,o){E=b.util.camel2dash(E);var j=b.style.properties[E];var p=w;if(!j){return null}if(w===undefined||w===null){return null}var k=b.is.string(w);if(k){w=b.util.trim(w)}var h=j.type;if(!h){return null}if(o&&(w===""||w===null)){return{name:E,value:w,bypass:true,deleteBypass:true}
}var D,s;if(!k){}else{if(D=new RegExp(b.style.types.data.regex).exec(w)){return{name:E,value:D,strValue:w,mapped:b.style.types.data,field:D[1],bypass:o}}else{if(s=new RegExp(b.style.types.mapData.regex).exec(w)){if(!(h.color||h.number)){return false}var e=this.parse(E,s[4]);if(!e||e.mapped){return false}var g=this.parse(E,s[5]);if(!g||g.mapped){return false}if(e.value===g.value){return false}else{if(h.color){var u=e.value;var t=g.value;var A=u[0]===t[0]&&u[1]===t[1]&&u[2]===t[2]&&(u[3]===t[3]||((u[3]==null||u[3]===1)&&(t[3]==null||t[3]===1)));
if(A){return false}}}return{name:E,value:s,strValue:w,mapped:b.style.types.mapData,field:s[1],fieldMin:parseFloat(s[2]),fieldMax:parseFloat(s[3]),valueMin:e.value,valueMax:g.value,bypass:o}}}}if(h.number){var z;if(!h.unitless){if(k){var l=w.match("^("+b.util.regex.number+")(px|em"+(h.allowPercent?"|\\%":"")+")?$");if(!h.enums){if(!l){return null}w=l[1];z=l[2]||"px"}}else{z="px"}}w=parseFloat(w);if(isNaN(w)&&h.enums!==undefined){w=p;for(var B=0;B<h.enums.length;B++){var d=h.enums[B];if(d===w){return{name:E,value:w,strValue:w,bypass:o}
}}return null}if(h.integer&&!b.is.integer(w)){return null}if((h.min!==undefined&&w<h.min)||(h.max!==undefined&&w>h.max)){return null}var C={name:E,value:w,strValue:""+w+(z?z:""),units:z,bypass:o,pxValue:h.unitless||z==="%"?undefined:(z==="px"||!z?(w):(this.getEmSizeInPixels()*w))};return C}else{if(h.color){var r=b.util.color2tuple(w);return{name:E,value:r,strValue:w,bypass:o}}else{if(h.enums){for(var B=0;B<h.enums.length;B++){var d=h.enums[B];if(d===w){return{name:E,value:w,strValue:w,bypass:o}}}}else{if(h.regex){var f=new RegExp(h.regex);
var v=f.exec(w);if(v){return{name:E,value:v,strValue:w,bypass:o}}else{return null}}else{if(h.string){return{name:E,value:w,strValue:w,bypass:o}}else{return null}}}}}};b.styfn.getEmSizeInPixels=function(){var g=this._private.cy;var f=g.container();if(c&&f){var e=c.getComputedStyle(f).getPropertyValue("font-size");var d=parseFloat(e);return d}else{return 1}};b.styfn.containerCss=function(d){var f=this._private.cy;var e=f.container();if(c&&e){return c.getComputedStyle(e).getPropertyValue(d)}};b.styfn.containerProperty=function(e){var d=this.containerCss(e);
var f=this.parse(e,d);return f};b.styfn.containerPropertyAsString=function(d){var e=this.containerProperty(d);if(e){return e.strValue}};b.styfn.selector=function(e){var d=e==="core"?null:new b.Selector(e);var f=this.length++;this[f]={selector:d,properties:[]};return this};b.styfn.css=function(){var e=arguments;switch(e.length){case 1:var g=e[0];for(var f=0;f<b.style.properties.length;f++){var h=b.style.properties[f];var d=g[h.name];if(d===undefined){d=g[b.util.dash2camel(h.name)]}if(d!==undefined){this.cssRule(h.name,d)
}}break;case 2:this.cssRule(e[0],e[1]);break;default:break}return this};b.styfn.cssRule=function(d,h){var g=this.parse(d,h);if(g){var e=this.length-1;this[e].properties.push(g);var f=!this[e].selector;if(f){this._private.coreStyle[g.name]=g}}return this};b.styfn.applyParsedProperty=function(s,B,i){B=b.util.clone(B);var j=B;var z=s._private.style;var p,l;var k=b.style.properties[j.name].type;var r=j.bypass;var A=z[j.name];var u=A&&A.bypass;if((B.name==="height"||B.name==="width")&&B.value==="auto"&&s.isNode()&&!s.isParent()){return false
}if(r&&j.deleteBypass){var t=z[j.name];if(!t){return true}else{if(t.bypass&&t.bypassed){z[j.name]=t.bypassed;return true}else{return false}}}switch(j.mapped){case b.style.types.mapData:p=s._private.data[j.field];if(!b.is.number(p)){return false}var e=(p-j.fieldMin)/(j.fieldMax-j.fieldMin);if(k.color){var w=j.valueMin[0];var v=j.valueMax[0];var d=j.valueMin[1];var E=j.valueMax[1];var o=j.valueMin[2];var m=j.valueMax[2];var D=j.valueMin[3]==null?1:j.valueMin[3];var C=j.valueMax[3]==null?1:j.valueMax[3];
var h=[Math.round(w+(v-w)*e),Math.round(d+(E-d)*e),Math.round(o+(m-o)*e),Math.round(D+(C-D)*e)];l={bypass:j.bypass,name:j.name,value:h,strValue:["rgba(",h[0],", ",h[1],", ",h[2],", ",h[3],")"].join("")}}else{if(k.number){var g=j.valueMin+(j.valueMax-j.valueMin)*e;l=this.parse(j.name,g,j.bypass)}else{return false}}if(!l){l=this.parse(j.name,A.strValue,j.bypass)}l.mapping=j;j=l;break;case b.style.types.data:p=s._private.data[j.field];l=this.parse(j.name,p,j.bypass);if(!l){l=this.parse(j.name,A.strValue,j.bypass)
}l.mapping=j;j=l;break;case undefined:break;default:return false}if(r){if(u){j.bypassed=A.bypassed}else{j.bypassed=A}z[j.name]=j}else{var f;if(u){f=A.bypassed;A.bypassed=j}else{f=z[j.name];z[j.name]=j}if(f&&f.mapping&&j.mapping&&f.context===i){f=f.prev}if(f&&f!==j){j.prev=f}}j.context=i;return true};b.styfn.rollBackContext=function(o,e){for(var h=0;h<e.properties.length;h++){var d=e.properties[h];var k=o._private.style[d.name];if(k.bypassed){k=k.bypassed}var i=true;var m;var g=0;while(k.prev){var f=k.prev;
if(k.context===e){if(i){o._private.style[d.name]=f}else{if(m){m.prev=f}}}m=k;k=f;i=false;g++}}};b.styfn.apply=function(p){var m=this;for(var e=0;e<p.length;e++){var o=p[e];if(m._private.newStyle){o._private.styleCxts=[];o._private.style={}}for(var h=0;h<this.length;h++){var f=this[h];var k=f.selector&&f.selector.filter(o).length>0;var l=f.properties;if(k){for(var g=0;g<l.length;g++){var d=l[g];if(!o._private.styleCxts[h]||d.mapped){this.applyParsedProperty(o,d,f)}}o._private.styleCxts[h]=f}else{if(o._private.styleCxts[h]){this.rollBackContext(o,f)
}delete o._private.styleCxts[h]}}}m._private.newStyle=false};b.styfn.update=function(){var e=this._private.cy;var d=e.elements();d.updateStyle()};b.styfn.getRenderedStyle=function(m){var m=m[0];if(m){var d={};var f=m._private.style;var j=this._private.cy;var l=j.zoom();for(var k=0;k<b.style.properties.length;k++){var e=b.style.properties[k];var h=f[e.name];if(h){var g=h.unitless?h.strValue:(h.pxValue*l)+"px";d[e.name]=g;d[b.util.dash2camel(e.name)]=g}}return d}};b.styfn.getRawStyle=function(h){var h=h[0];
if(h){var e={};var g=h._private.style;for(var f=0;f<b.style.properties.length;f++){var j=b.style.properties[f];var d=g[j.name];if(d){e[j.name]=d.strValue;e[b.util.dash2camel(j.name)]=d.strValue}}return e}};b.styfn.getValueStyle=function(h){var e,g;if(b.is.element(h)){e={};g=h._private.style}else{e={};g=h}if(g){for(var f=0;f<b.style.properties.length;f++){var k=b.style.properties[f];var d=g[k.name]||g[b.util.dash2camel(k.name)];if(d!==undefined&&!b.is.plainObject(d)){d=this.parse(k.name,d)}if(d){var j=d.value===undefined?d:d.value;
e[k.name]=j;e[b.util.dash2camel(k.name)]=j}}}return e};b.styfn.updateFunctionalProperties=function(d){for(var g=0;g<d.length;g++){var l=d[g];var k=l._private.style;for(var f=0;f<b.style.properties.length;f++){var m=b.style.properties[f];var h=k[m.name];if(h&&h.mapping){var e=h.mapping;this.applyParsedProperty(l,e)}}}};b.styfn.applyBypass=function(r,e,o){var m=[];if(e==="*"||e==="**"){if(o!==undefined){for(var h=0;h<b.style.properties.length;h++){var d=b.style.properties[h];var e=d.name;var l=this.parse(e,o,true);
if(l){m.push(l)}}}}else{if(b.is.string(e)){var l=this.parse(e,o,true);if(l){m.push(l)}}else{if(b.is.plainObject(e)){var f=e;for(var h=0;h<b.style.properties.length;h++){var d=b.style.properties[h];var e=d.name;var o=f[e];if(o===undefined){o=f[b.util.dash2camel(e)]}if(o!==undefined){var l=this.parse(e,o,true);if(l){m.push(l)}}}}else{return false}}}if(m.length===0){return false}var k=false;for(var h=0;h<r.length;h++){var p=r[h];for(var g=0;g<m.length;g++){var d=m[g];k=this.applyParsedProperty(p,d)||k
}}return k};b.styfn.removeAllBypasses=function(d){for(var h=0;h<b.style.properties.length;h++){var m=b.style.properties[h];var g=m.name;var l="";var e=this.parse(g,l,true);for(var f=0;f<d.length;f++){var k=d[f];this.applyParsedProperty(k,e)}}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){var c={showOverlay:true,hideEdgesOnViewport:false};var b=a.util.copy(c);a.defaults=function(d){c=a.util.extend({},b,d)};a.fn.core=function(d,f){for(var e in d){var g=d[e];a.Core.prototype[e]=g
}};a.Core=function(h){if(!(this instanceof a.Core)){return new a.Core(h)}var i=this;h=a.util.extend({},c,h);var d=h.container;var f=a.getRegistrationForInstance(i,d);if(f&&f.cy){f.domElement.innerHTML="";f.cy.notify({type:"destroy"});a.removeRegistrationForInstance(f.cy,f.domElement)}f=a.registerInstance(i,d);var g=f.readies;var e=h;e.layout=a.util.extend({name:typeof window==="undefined"?"null":"grid"},e.layout);e.renderer=a.util.extend({name:typeof window==="undefined"?"null":"canvas"},e.renderer);
this._private={ready:false,instanceId:f.id,options:e,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:e.zoomEnabled===undefined?true:e.zoomEnabled,panEnabled:e.panEnabled===undefined?true:e.panEnabled,boxSelectionEnabled:e.boxSelectionEnabled===undefined?true:e.boxSelectionEnabled,zoom:a.is.number(e.zoom)?e.zoom:1,pan:{x:a.is.plainObject(e.pan)&&a.is.number(e.pan.x)?e.pan.x:0,y:a.is.plainObject(e.pan)&&a.is.number(e.pan.y)?e.pan.y:0,},hasCompoundNodes:false};
if(a.is.number(e.minZoom)&&a.is.number(e.maxZoom)&&e.minZoom<e.maxZoom){this._private.minZoom=e.minZoom;this._private.maxZoom=e.maxZoom}else{if(a.is.number(e.minZoom)&&e.maxZoom===undefined){this._private.minZoom=e.minZoom}else{if(a.is.number(e.maxZoom)&&e.minZoom===undefined){this._private.maxZoom=e.maxZoom}}}this._private.style=a.is.stylesheet(e.style)?e.style.generateStyle(this):new a.Style(i);i.initRenderer(a.util.extend({showOverlay:e.showOverlay,hideEdgesOnViewport:e.hideEdgesOnViewport},e.renderer));
i.load(e.elements,function(){i.startAnimationLoop();i._private.ready=true;if(a.is.fn(e.ready)){i.bind("ready",e.ready)}for(var j=0;j<g.length;j++){var k=g[j];i.bind("ready",k)}f.readies=[];i.trigger("ready")},e.done)};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(e){var d=this._private.id2index[e];
if(d!==undefined){return this._private.elements[d]}return new a.Collection(this)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){var j=this._private.elements;var l=this._private.id2index;for(var g=0;g<e.length;g++){var h=e[g];var k=h._private.data.id;var f=l[k];var d=f!==undefined;if(!d){f=j.length;j.push(h);l[k]=f;h._private.index=f}}return this},removeFromPool:function(p){var d=this._private.elements;var g=this._private.id2index;for(var k=0;k<p.length;k++){var o=p[k];
var e=o._private.data.id;var l=g[e];var m=l!==undefined;if(m){delete this._private.id2index[e];d.splice(l,1);for(var h=l;h<d.length;h++){var f=d[h]._private.data.id;g[f]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)},json:function(e){var d={};var f=this;d.elements={};f.elements().each(function(g,h){var j=h.group();if(!d.elements[j]){d.elements[j]=[]}d.elements[j].push(h.json())});d.style=f.style();d.scratch=f.scratch();
d.zoomEnabled=f._private.zoomEnabled;d.panEnabled=f._private.panEnabled;d.layout=f._private.options.layout;d.renderer=f._private.options.renderer;return d}})})(cytoscape);(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var v=d;var o=[];for(var h=0;h<v.length;h++){var u=v[h];o.push(u.json())}c=new a.Collection(e,o)}else{if(a.is.array(d)){var o=d;c=new a.Collection(e,o)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var o=[];
var p=["nodes","edges"];for(var h=0,r=p.length;h<r;h++){var s=p[h];var m=l[s];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var t=m[f];var k=a.util.extend({},t,{group:s});o.push(k)}}}c=new a.Collection(e,o)}else{var t=d;c=(new a.Element(e,t)).collection()}}}return c.filter(function(){return !this.removed()})},remove:function(d){if(a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()
}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);i.trigger("done")});i.layout(i._private.options.layout)}if(true||b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);
(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=1000/60;var l=false;var i=true;g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);
if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(o){d(o);k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(r){r=+new Date;var C=g._private.aniEles;for(var w=0;w<C.length;w++){var B=C[w];var z=B._private.animation.current;var v=B._private.animation.queue;if(z.length===0){var o=v;var u=o.length>0?o.shift():null;if(u!=null){u.callTime=+new Date;z.push(u)}}var A=[];for(var t=0;t<z.length;t++){var s=z[t];
e(B,s,r);if(z[t].done){A.push(s);z.splice(t,1);t--}}for(var t=0;t<A.length;t++){var s=A[t];var p=s.params.complete;if(a.is.fn(p)){p.apply(B,[r])}}}if(C.length>0){g.notify({type:"draw",collection:C})}for(var t=0;t<C.length;t++){var B=C[t];var v=B._private.animation.queue;var z=B._private.animation.current;var m=z.length>0||v.length>0;if(!m){C.splice(t,1);t--}}}function e(G,z,t){var o=g._private.style;var D=z.properties;var w=z.params;var u=z.callTime;var C;if(z.duration===0){C=1}else{C=Math.min(1,(t-u)/z.duration)
}if(C<0){C=0}else{if(C>1){C=1}}if(D.delay==null){var B=z.startPosition;var s=D.position;var F=G._private.position;if(s){if(b(B.x,s.x)){F.x=h(B.x,s.x,C)}if(b(B.y,s.y)){F.y=h(B.y,s.y,C)}}if(D.css){var E=a.style.properties;for(var A=0;A<E.length;A++){var m=E[A].name;var v=D.css[m];if(v!==undefined){var r=z.startStyle[m];var p=h(r,v,C);o.applyBypass(G,m,p)}}}}if(a.is.fn(w.step)){w.step.apply(G,[t])}if(C>=1){z.done=true}return C}function b(o,m){if(o==null||m==null){return false}if(a.is.number(o)&&a.is.number(m)){return true
}else{if((o)&&(m)){return true}}return false}function h(p,s,w){if(w<0){w=0}else{if(w>1){w=1}}if(a.is.number(p)&&a.is.number(s)){return p+Math.abs(s-p)*w}else{if(a.is.number(p[0])&&a.is.number(s[0])){var u=p;var t=s;function o(B,r){var C=r-B;var A=B;return Math.round(w*C+A)}var m=o(u[0],t[0]);var v=o(u[1],t[1]);var z=o(u[2],t[2]);return"rgb("+m+", "+v+", "+z+")"}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({png:function(){var c=this;var b=this._private.renderer;return b.png()}})})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(this._private.layoutRunning){return this
}if(b==null){b=this._private.options.layout}this.initLayout(b);c.trigger("layoutstart");this._private.layoutRunning=true;this.one("layoutstop",function(){this._private.layoutRunning=false});this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);
return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;
if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))
}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style
}})})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;a.fn.core({panningEnabled:function(c){if(c!==undefined){this._private.panEnabled=c?true:false}else{return this._private.panEnabled}return this},zoomingEnabled:function(c){if(c!==undefined){this._private.zoomEnabled=c?true:false}else{return this._private.zoomEnabled}return this},boxSelectionEnabled:function(c){if(c!==undefined){this._private.boxSelectionEnabled=c?true:false}else{return this._private.boxSelectionEnabled
}return this},pan:function(){var d=arguments;var h=this._private.pan;var e,g,f,c,i;switch(d.length){case 0:return h;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(d[0])){e=d[0];return h[e]}else{if(a.is.plainObject(d[0])){f=d[0];c=f.x;i=f.y;if(a.is.number(c)){h.x=c}if(a.is.number(i)){h.y=i}this.trigger("pan")}}}break;case 2:if(!this._private.panEnabled){return this}e=d[0];g=d[1];if((e==="x"||e==="y")&&a.is.number(g)){h[e]=g}this.trigger("pan");break;default:break}this.notify({type:"viewport"});
return this},panBy:function(i){var d=arguments;var h=this._private.pan;var e,g,f,c,j;if(!this._private.panEnabled){return this}switch(d.length){case 1:if(a.is.plainObject(d[0])){f=d[0];c=f.x;j=f.y;if(a.is.number(c)){h.x+=c}if(a.is.number(j)){h.y+=j}this.trigger("pan")}break;case 2:e=d[0];g=d[1];if((e==="x"||e==="y")&&a.is.number(g)){h[e]+=g}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(i,j){if(a.is.number(i)&&j===undefined){j=i;i=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this
}if(a.is.string(i)){var g=i;i=this.$(g)}else{if(!a.is.elementOrCollection(i)){i=this.elements()}}var k=i.boundingBox();var e=this.style();var c=parseFloat(e.containerCss("width"))*b;var d=parseFloat(e.containerCss("height"))*b;var f;j=a.is.number(j)?j:0;if(!isNaN(c)&&!isNaN(d)){f=this._private.zoom=Math.min((c-2*j)/k.w,(d-2*j)/k.h);f=f>this._private.maxZoom?this._private.maxZoom:f;f=f<this._private.minZoom?this._private.minZoom:f;this._private.pan={x:(c-f*(k.x1+k.x2))/2,y:(d-f*(k.y1+k.y2))/2}}this.trigger("pan zoom");
this.notify({type:"viewport"});return this},minZoom:function(c){if(c===undefined){return this._private.minZoom}else{if(a.is.number(c)){this._private.minZoom=c}}return this},maxZoom:function(c){if(c===undefined){return this._private.maxZoom}else{if(a.is.number(c)){this._private.maxZoom=c}}return this},zoom:function(e){var k;var l;if(e===undefined){return this._private.zoom}else{if(a.is.number(e)){l=e;k={x:0,y:0}}else{if(a.is.plainObject(e)){l=e.level;if(e.renderedPosition){var m=e.renderedPosition;
var c=this._private.pan;var j=this._private.zoom;k={x:(m.x-c.x)/j,y:(m.y-c.y)/j}}else{if(e.position){k=e.position}}if(k&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(l)||!a.is.number(k.x)||!a.is.number(k.y)){return this}l=l>this._private.maxZoom?this._private.maxZoom:l;l=l<this._private.minZoom?this._private.minZoom:l;var h=this._private.pan;var i=this._private.zoom;var g=l;var f={x:-g/i*(k.x-h.x)+k.x,y:-g/i*(k.y-h.y)+k.y};this._private.zoom=l;
this._private.pan=f;var d=h.x!==f.x||h.y!==f.y;this.trigger("zoom"+(d?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(d){var c=this.$(d);return c.boundingBox()},center:function(i){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}if(a.is.string(i)){var c=i;i=cy.elements(c)}else{if(!a.is.elementOrCollection(i)){i=cy.elements()}}var j=i.boundingBox();var f=this.style();var d=parseFloat(f.containerCss("width"))*b;var e=parseFloat(f.containerCss("height"))*b;
var g=this._private.zoom;this.pan({x:(d-g*(j.x1+j.x2))/2,y:(e-g*(j.y1+j.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;
var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])}}return f}};b.Element=function(e,g,j){if(!(this instanceof b.Element)){return new b.Element(e,g,j)}var p=this;j=(j===undefined||j?true:false);if(e===undefined||g===undefined||!b.is.core(e)){b.util.error("An element must have a core reference and parameters set");return}if(g.group!=="nodes"&&g.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+g.group+"`");
return}this.length=1;this[0]=this;this._private={cy:e,single:true,data:g.data||{},position:g.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:g.group,style:{},rstyle:{},styleCxts:[],removed:true,selected:g.selected?true:false,selectable:g.selectable===undefined?true:(g.selectable?true:false),locked:g.locked?true:false,grabbed:false,grabbable:g.grabbable===undefined?true:(g.grabbable?true:false),active:false,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};
if(g.renderedPosition){var r=g.renderedPosition;var k=e.pan();var o=e.zoom();var f="devicePixelRatio" in window?devicePixelRatio:1;this._private.position={x:(r.x*f-k.x)/o,y:(r.y*f-k.y)/o}}if(b.is.string(g.classes)){var d=g.classes.split(/\s+/);for(var h=0,c=d.length;h<c;h++){var m=d[h];if(!m||m===""){continue}p._private.classes[m]=true}}if(j===undefined||j){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");
return}var d={};var f=[];var p=false;if(!c){c=[]}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){p=true;var t=[];var j={};for(var o=0,g=c.length;o<g;o++){var r=c[o];if(r.data==null){r.data={}}var m=r.data;if(m.id==null){m.id=a.generate(h,r)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var s=new b.Element(h,r,false);t.push(s);j[m.id]=true}c=t}}for(var o=0,g=c.length;o<g;o++){var k=c[o];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var o=0,g=f.length;
o<g;o++){this[o]=f[o]}this.length=f.length;this._private={cy:h,ids:d};if(p){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:""});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(t){var s=this;var K=[];var f=s.cy();if(t===undefined){t=true}var p=[];var A=[],e=[];var w=0;var d=0;for(var G=0,C=s.length;G<C;G++){var o=s[G];if(o.isNode()){A.push(o);w++}else{e.push(o);d++}}p=A.concat(e);for(var G=0,C=p.length;G<C;G++){var o=p[G];if(!o.removed()){continue}var r=o._private;var L=r.data;if(L.id===undefined){L.id=a.generate(f,o)}else{if(b.is.emptyString(L.id)||!b.is.string(L.id)){continue
}else{if(f.getElementById(L.id).length!=0){continue}}}var u=L.id;if(o.isEdge()){var h=o;var v=["source","target"];var z=v.length;for(var D=0;D<z;D++){var c=v[D];var M=L[c];if(M==null||M===""){continue}else{if(f.getElementById(M).empty()){continue}}}var k=f.getElementById(L.source);var F=f.getElementById(L.target);k._private.edges.push(h);F._private.edges.push(h)}r.ids={};r.ids[L.id]=o;r.removed=false;f.addToPool(o);K.push(o)}for(var G=0;G<w;G++){var B=p[G];var L=B._private.data;var u=L.id;var E=B._private.data.parent;
var g=E!=null;if(g){var m=f.getElementById(E);if(m.empty()){delete L.parent}else{var H=false;var J=m;while(!J.empty()){if(B.same(J)){H=true;delete L.parent;break}J=J.parent()}if(!H){m[0]._private.children.push(B);f._private.hasCompoundNodes=true}}}}K=new b.Collection(f,K);if(K.length>0){var I=K.add(K.connectedNodes()).add(K.parent());I.updateStyle(t);if(t){K.rtrigger("add")}else{K.trigger("add")}}return s};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];
return c&&!c._private.removed};b.elesfn.remove=function(s){var r=this;var B=[];var D=[];var f={};var c=r._private.cy;if(s===undefined){s=true}function C(F){var l=F._private.edges;for(var E=0;E<l.length;E++){m(l[E])}}function j(F){var E=F._private.children;for(var l=0;l<E.length;l++){m(E[l])}}function m(i){var l=f[i.id()];if(l){return}else{f[i.id()]=true}if(i.isNode()){D.push(i);C(i);j(i)}else{D.unshift(i)}}for(var z=0,t=r.length;z<t;z++){var k=r[z];m(k)}function o(G,F){var i=G._private.edges;for(var l=0;
l<i.length;l++){var E=i[l];if(F===E){i.splice(l,1);break}}}function d(E,F){F=F[0];E=E[0];var l=E._private.children;for(var i=0;i<l.length;i++){if(l[i][0]===F[0]){l.splice(i,1);break}}}for(var z=0;z<D.length;z++){var k=D[z];k._private.removed=true;c.removeFromPool(k);B.push(k);if(k.isEdge()){var g=k.source()[0];var A=k.target()[0];o(g,k);o(A,k)}else{var h=k.parent();if(h.length!==0){d(h,k)}}}var p=c._private.elements;c._private.hasCompoundNodes=false;for(var z=0;z<p.length;z++){var k=p[z];if(k.isParent()){c._private.hasCompoundNodes=true;
break}}var w=new b.Collection(this.cy(),B);if(w.size()>0){if(s){this.cy().notify({type:"remove",collection:w})}w.trigger("remove")}var e={};for(var z=0;z<D.length;z++){var k=D[z];var u=k._private.group==="nodes";var v=k._private.data.parent;if(u&&v!==undefined&&!e[v]){e[v]=true;var h=c.getElementById(v);if(h&&h.length!==0&&!h._private.removed&&h.children().length===0){h.updateStyle()}}}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0
}},clearQueue:function(){for(var b=0;b<this.length;b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)
}for(var h=0;h<this.length;h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];
if(h){g.duration=0}}if(f){c._private.animation.queue=[]}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;if(!e){k.push(h)}}}if(k.length>0){new a.Collection(this._private.cy,k).updateStyle()}c.trigger("class");return c},hasClass:function(b){var c=this[0];
return c!=null&&c._private.classes[b]},toggleClass:function(h,g){var b=h.split(/\s+/);var o=this;var e=[];for(var f=0,k=o.length;f<k;f++){var p=o[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=p._private.classes[m];var l=g||(g===undefined&&!d);if(l){p._private.classes[m]=true;if(!d){e.push(p)}}else{p._private.classes[m]=false;if(d){e.push(p)}}}}if(e.length>0){new a.Collection(this._private.cy,e).updateStyle()}o.trigger("class");return o},removeClass:function(g){g=g.split(/\s+/);
var c=this;var k=[];for(var f=0;f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}if(k.length>0){new a.Collection(c._private.cy,k).updateStyle()}c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false
}return this.intersect(b).length===this.length},anySame:function(b){b=this.cy().collection(b);return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(b){var a=1.4;var c=1;b.fn.eles({updateStyle:function(d){var f=this._private.cy;var e=f.style();d=d||d===undefined?true:false;e.apply(this);if(d){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(d){var h=this._private.cy;
var f=h.style();d=d||d===undefined?true:false;for(var e=0;e<this.length;e++){var g=this[e];f.apply(g)}if(d){this.rtrigger("style")}else{this.trigger("style")}return this},data:b.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:b.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:b.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:b.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:b.define.removeData({field:"scratch",triggerEvent:false}),rscratch:b.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:b.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var d=this[0];
if(d){return d._private.data.id}},position:b.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(h){if(b.is.plainObject(h)){this.position(h)}else{if(b.is.fn(h)){var e=h;for(var d=0;d<this.length;d++){var f=this[d];var h=e.apply(f,[d,f]);if(h&&!f.locked()){var g=f._private.position;g.x=h.x;g.y=h.y}}this.rtrigger("position")}}return this
},renderedPosition:function(f){var e=this[0];var j=this.cy();var d=j.zoom();var h=j.pan();if(e&&e.isNode()){var i=e._private.position;var g={x:i.x*d+h.x,y:i.y*d+h.y};if(f===undefined){return g}else{return g[f]}}},renderedCss:function(f){var e=this[0];if(e){var d=e.cy().style().getRenderedStyle(e);if(f===undefined){return d}else{return d[f]}}},css:function(d,h){var f=this.cy().style();if(b.is.plainObject(d)){var e=d;f.applyBypass(this,e);this.rtrigger("style")}else{if(b.is.string(d)){if(h===undefined){var g=this[0];
if(g){return g._private.style[d].strValue}else{return}}else{f.applyBypass(this,d,h);this.rtrigger("style")}}else{if(d===undefined){var g=this[0];if(g){return f.getRawStyle(g)}else{return}}}}return this},removeCss:function(){var f=this.cy().style();var d=this;for(var e=0;e<d.length;e++){var g=d[e];f.removeAllBypasses(g)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var h=this[0];
if(h){if(h.css("visibility")!=="visible"){return false}if(h.isNode()){var e=h.parents();for(var f=0;f<e.length;f++){var g=e[f];var d=g.css("visibility");if(d!=="visible"){return false}}return true}else{if(h.isEdge()){var j=h.source();var k=h.target();return j.visible()&&k.visible()}}}},hidden:function(){var d=this[0];if(d){return !this.visible()}},width:function(){var e=this[0];if(e){var d=this._private.style.width;return d.strValue==="auto"?e._private.autoWidth:d.pxValue}},outerWidth:function(){var g=this[0];
if(g){var f=this._private.style;var e=f.width.strValue==="auto"?g._private.autoWidth:f.width.pxValue;var d=f["border-width"]?f["border-width"].pxValue*a+c:0;return e+d}},renderedWidth:function(){var e=this[0];if(e){var d=this.width();return d*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var d=this.outerWidth();return d*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var d=this._private.style.height;return d.strValue==="auto"?e._private.autoHeight:d.pxValue
}},outerHeight:function(){var g=this[0];if(g){var f=this._private.style;var d=f.height.strValue==="auto"?g._private.autoHeight:f.height.pxValue;var e=f["border-width"]?f["border-width"].pxValue*a+c:0;return d+e}},renderedHeight:function(){var e=this[0];if(e){var d=this.height();return d*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var d=this.outerHeight();return d*this.cy().zoom()}},offset:function(){var g=this[0];if(g&&g.isNode()){var j={x:g._private.position.x,y:g._private.position.y};
var d=g.parents();for(var e=0;e<d.length;e++){var f=d[e];var h=f._private.position;j.x+=h.x;j.y+=h.y}return j}},renderedOffset:function(){var e=this[0];if(e&&e.isNode()){var g=this.offset();var h=this.cy();var d=h.zoom();var f=h.pan();return{x:g.x*d+f.x,y:g.y*d+f.y}}},boundingBox:function(e){var K=this;if(!e||(b.is.elementOrCollection(e)&&e.length===0)){K=this}else{if(b.is.string(e)){K=this.filter(e)}else{if(b.is.elementOrCollection(e)){K=e}}}var p=Infinity;var o=-Infinity;var W=Infinity;var U=-Infinity;
for(var S=0;S<K.length;S++){var V=K[S];var C,B,m,l,H,G;if(V.isNode()){var z=V._private.position;H=z.x;G=z.y;var I=V.outerWidth();var D=I/2;var T=V.outerHeight();var M=T/2;C=H-D;B=H+D;m=G-M;l=G+M;p=C<p?C:p;o=B>o?B:o;W=m<W?m:W;U=l>U?l:U}else{var A=V.source()[0]._private.position;var d=V.target()[0]._private.position;var E=V._private.rstyle;H=E.labelX;G=E.labelY;C=A.x;B=d.x;m=A.y;l=d.y;if(C>B){var f=C;C=B;B=f}if(m>l){var f=m;m=l;l=f}p=C<p?C:p;o=B>o?B:o;W=m<W?m:W;U=l>U?l:U;var k=E.bezierPts||[];var I=V._private.style.width.value;
for(var R=0;R<k.length;R++){var Q=k[R];p=Q.x-I<p?Q.x-I:p;o=Q.x+I>o?Q.x+I:o;W=Q.y-I<W?Q.y-I:W;U=Q.y+I>U?Q.y+I:U}}var P=V._private.style;var O=P.content.value;var r=P["font-size"];var v=P["text-halign"];var J=P["text-valign"];var g=V._private.rstyle.labelWidth;if(O&&r&&g!=undefined&&v&&J){var F=r.value;var u=g;var N,L,t,s;switch(v.value){case"left":N=C-u;L=C;break;case"center":N=H-u/2;L=H+u/2;break;case"right":N=B;L=B+u;break}if(V.isEdge()){N=H-u/2;L=H+u/2}switch(J.value){case"top":t=m-F;s=m;break;
case"center":t=G-F/2;s=G+F/2;break;case"bottom":t=l;s=l+F;break}if(V.isEdge()){t=G-F/2;s=G+F/2}p=N<p?N:p;o=L>o?L:o;W=t<W?t:W;U=s>U?s:U}}return{x1:p,x2:o,y1:W,y2:U,w:o-p,h:U-W}}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1
}}),indegree:a(function(e,d){if(d.target().same(e)){return 1}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d
}),minOutdegree:c("outdegree",function(e,d){return e<d}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()
})});this.trigger(b,c);return this}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;
c++){var e=this[c];var b=d.apply(e,[c,e]);if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;
if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})
}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}};a({field:"active",on:"activate",off:"unactivate"});b.elesfn.inactive=function(){var d=this[0];if(d){return !d._private.active}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()
}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)
}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)}},intersect:function(m){var p=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];var l=this;var k=m;var o=this.length<m.length;var h=o?l._private.ids:k._private.ids;var g=o?k._private.ids:l._private.ids;for(var f in h){var r=g[f];if(r){e.push(r)}}return new b.Collection(i,e)},add:function(m){var o=this;var g=this._private.cy;if(!m){return this
}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true}}for(var k=0;k<o.length;k++){var j=o[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)}});b.fn.eles({breadthFirstSearch:function(m,h){m=m||function(){};var g=this._private.cy;var p=this;var k=[];var w={};var l={};var B={};var A=[];for(var C=0;C<p.length;C++){if(p[C].isNode()){k.unshift(p[C]);w[p[C].id()]=true;l[p[C].id()]=0;A.push(p[C])}}C=0;
while(k.length!==0){var s=k.shift();var F=0;var o=B[s.id()];while(o){F++;o=B[o]}l[s.id()]=F;var E=m.call(s,C,F);C++;if(E===true){return new b.Collection(g,[s])}else{if(E===false){break}}var f=s.connectedEdges(h?'[source = "'+s.id()+'"]':undefined);for(var z=0;z<f.length;z++){var D=f[z];var r=D.connectedNodes('[id != "'+s.id()+'"]');if(r.length!==0){r=r[0];if(!w[r.id()]){w[r.id()]=true;k.unshift(r);B[r.id()]=s.id();A.push(r);A.push(D)}}}}return new b.Collection(g,A)},depthFirstSearch:function(p,j){p=p||function(){};
var h=this._private.cy;var z=this;var k=[];var B=[];var m={};var D={};var G={};var l={};var r={};function f(i){var t=i.id();return m[t]||D[t]||G[t]||l[t]}for(var C=0;C<z.length;C++){if(z[C].isNode()){k.push(z[C]);B[z[C].id()]=true}}while(k.length!==0){var A=k[k.length-1];var F=p.call(A);var o=false;if(F===true){return new b.Collection(h,[A])}var g=A.connectedEdges(j?'[source = "'+A.id()+'"]':undefined);for(var C=0;C<g.length;C++){var E=g[C];if(f(E)){continue}var u=E.connectedNodes('[id != "'+A.id()+'"]');
if(u.length!==0){u=u[0];var s=u.id();if(!B[s]&&!r[s]){l[s]=true;B[s]=true;k.push(u);o=true;break}else{if(B[s]){D[s]=true}else{G[s]=true}}}}if(!o){r[A.id()]=true;k.pop()}}},roots:function(f){var e=this;var g=[];for(var h=0;h<e.length;h++){var k=e[h];if(!k.isNode()){continue}var j=k.connectedEdges('[target = "'+k.id()+'"][source != "'+k.id()+'"]').length>0;if(!j){g.push(k)}}return new b.Collection(this._private.cy,g).filter(f)},kruskal:function(l){l=l||function(){return 1};function m(w){for(var v=0;
v<o.length;v++){var u=o[v];if(u.anySame(w)){return{eles:u,index:v}}}}var g=new b.Collection(this._private.cy,[]);var o=[];var e=this.nodes();for(var k=0;k<e.length;k++){o.push(e[k].collection())}var j=this.edges();var h=j.toArray().sort(function(v,u){var i=l.call(v);var w=l.call(u);return i-w});for(var k=0;k<h.length;k++){var f=h[k];var t=f.source()[0];var r=f.target()[0];var s=m(t);var p=m(r);if(s.eles!==p.eles){g=g.add(f);o[s.index]=s.eles.add(p.eles);o.splice(p.index,1)}}return e.add(g)},dijkstra:function(C,D,f){var e=this._private.cy;
f=!b.is.fn(D)?D:f;f=f===undefined||f;D=b.is.fn(D)?D:function(){return 1};if(this.length===0||!C||!b.is.elementOrCollection(C)||C.length===0){return new b.Collection(e,[])}var r=this[0];C=C[0];var o={};var l={};var p=e.nodes();for(var t=0;t<p.length;t++){o[p[t].id()]=Infinity}o[r.id()]=0;var g=p;var z=function(F){var E=Infinity;var u;for(var v in o){if(o[v]<E&&F.$("#"+v).length!==0){E=o[v];u=v}}return u};var w=function(I,H){var G=I.edgesWith(H);var F=Infinity;var E;for(var J=0;J<G.length;J++){var K=G[J];
var L=D.call(K);if(L<F){F=L;E=K}}return{edge:E,dist:F}};while(g.length!==0){var h=z(g);var k=g.filter("#"+h);if(k.length===0){continue}g=g.not(k);if(k.same(C)){break}if(o[h]===Math.Infinite){break}var s=k.neighborhood().nodes();for(var t=0;t<s.length;t++){var j=s[t];var A=j.id();var m=w(k,j);var B=o[h]+m.dist;if(B<o[A]){o[A]=B;l[A]={node:j,edge:m.edge}}}}}});b.elesfn.bfs=b.elesfn.breadthFirstSearch;b.elesfn.dfs=b.elesfn.depthFirstSearch;b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;
var f=this.nodes();for(var r=0;r<f.length;r++){var k=f[r];var h=k.connectedEdges();for(var p=0;p<h.length;p++){var g=h[p];var o=g.connectedNodes().not(k);if(o.length>0){e.push(o[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});function d(e){return function(f){var h=[];var g=this.edges();
var o=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=o.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(o,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(s){var f=[];var j=this._private.cy;var g=e||{};if(b.is.string(s)){s=j.$(s)}var l=s.connectedEdges();var t=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var o;var r=h._private.data;if(g.thisIs){var k=r[g.thisIs];o=t[k]}else{o=t[r.source]||t[r.target]
}if(o){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var h=f[p];var o=h._private.edges;for(var m=0;m<o.length;m++){var g=o[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];
if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var p=h===g;if(p){return l}var o=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var k=o||f;if(k){l++}}}},parallelSize:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];
var o=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=o||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(D){var l=this._private.cy;var v=[];var k=this.edges();var w=f;for(var E=0;E<k.length;E++){var u=k[E];var F=u.source()[0];var s=F.id();var B=u.target()[0];var o=B.id();var A=F._private.edges;
for(var C=0;C<A.length;C++){var t=A[C];var g=t._private.data;var m=g.target;var r=g.source;var h=m===o&&r===s;var z=s===m&&o===r;if((w.codirected&&h)||(!w.codirected&&(h||z))){v.push(t)}}}return new b.Collection(l,v).filter(D)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);if(h.size()>0){f.push(h)}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;
h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e){return e._private.children.length!==0}},isChild:function(){var e=this[0];if(e){return e._private.data.parent!==undefined&&e.parent().length!==0
}},descendants:function(e){var f=[];function g(h){for(var j=0;j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;
onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);
self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";
var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"
}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))
}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})
}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();
descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `"+selector+"`");return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;
var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();
for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `"+selector+"`is invalid");return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;
parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$$.util.error("When adjusting references for the selector `"+query+"`, neither parent nor ancestor was found");break}}}self[j]=query.subject}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$$.util.error("Group `"+self[j].group+"` conflicts with implicit group `"+onlyThisGroup+"` in selector `"+selector+"`");
return}self[j].group=onlyThisGroup}}}else{$$.util.error("A selector must be created from a string; found "+selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false
}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();
break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();
break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch);
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(A){var G="devicePixelRatio" in window?devicePixelRatio:1;var z=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;var o=function(){return Date.now()};var b={};var s={};var c=B.prototype;var r=400;var e=5,F=0,d=2,w=3,J=4,a=2;function B(L){this.options=L;this.data={select:[undefined,undefined,undefined,undefined,0],renderer:this,cy:L.cy,container:L.cy.container(),canvases:new Array(e),canvasRedrawReason:new Array(e),canvasNeedsRedraw:new Array(e),bufferCanvases:new Array(a)};
this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};this.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.bindings=[];this.init();
for(var M=0;M<e;M++){this.data.canvases[M]=document.createElement("canvas");this.data.canvases[M].style.position="absolute";this.data.canvases[M].setAttribute("data-id","layer"+M);this.data.canvases[M].style.zIndex=String(e-M);this.data.container.appendChild(this.data.canvases[M]);this.data.canvasRedrawReason[M]=new Array();this.data.canvasNeedsRedraw[M]=false}this.data.canvases[J].setAttribute("data-id","layer"+J+"-node");this.data.canvases[F].setAttribute("data-id","layer"+F+"-selectbox");this.data.canvases[d].setAttribute("data-id","layer"+d+"-drag");
this.data.canvases[w].setAttribute("data-id","layer"+w+"-overlay");for(var M=0;M<a;M++){this.data.bufferCanvases[M]=document.createElement("canvas");this.data.bufferCanvases[M].style.position="absolute";this.data.bufferCanvases[M].setAttribute("data-id","buffer"+M);this.data.bufferCanvases[M].style.zIndex=String(-M-1);this.data.bufferCanvases[M].style.visibility="visible";this.data.container.appendChild(this.data.bufferCanvases[M])}var K=document.createElement("div");this.data.container.appendChild(K);
this.data.overlay=K;K.style.position="absolute";K.style.zIndex=1000;if(L.showOverlay){var N=document.createElement("a");K.appendChild(N);this.data.link=N;N.innerHTML="cytoscape.js";N.style.font="14px helvetica";N.style.position="absolute";N.style.right=0;N.style.bottom=0;N.style.padding="1px 3px";N.style.paddingLeft="5px";N.style.paddingTop="5px";N.style.opacity=0;N.style["-webkit-tap-highlight-color"]="transparent";N.style.background="red";N.href="http://cytoscape.github.io/cytoscape.js/";N.target="_blank"
}this.hideEdgesOnViewport=L.hideEdgesOnViewport;this.load()}B.prototype.notify=function(i){if(i.type=="destroy"){this.destroy();return}else{if(i.type=="add"||i.type=="remove"||i.type=="load"){this.updateNodesCache();this.updateEdgesCache()}}if(i.type=="viewport"){this.data.canvasNeedsRedraw[F]=true;this.data.canvasRedrawReason[F].push("viewchange")}this.data.canvasNeedsRedraw[d]=true;this.data.canvasRedrawReason[d].push("notify");this.data.canvasNeedsRedraw[J]=true;this.data.canvasRedrawReason[J].push("notify");
this.redraws++;this.redraw()};B.prototype.registerBinding=function(M,L,K,i){this.bindings.push({target:M,event:L,handler:K,useCapture:i});M.addEventListener(L,K,i)};B.prototype.destroy=function(){this.destroyed=true;for(var L=0;L<this.bindings.length;L++){var M=this.bindings[L];var K=M;K.target.removeEventListener(K.event,K.handler,K.useCapture)}};B.prototype.png=function(){var K=this.data;if(this.data.container.clientHeight>0&&this.data.container.clientWidth>0){context=K.bufferCanvases[1].getContext("2d");
context.globalCompositeOperation="copy";context.drawImage(K.canvases[4],0,0);context.globalCompositeOperation="source-over";context.drawImage(K.canvases[2],0,0);context.drawImage(K.canvases[0],0,0);context=K.bufferCanvases[0].getContext("2d");context.globalCompositeOperation="copy";context.drawImage(K.bufferCanvases[1],0,0)}var i=this.data.bufferCanvases[0];return i.toDataURL("image/png")};B.prototype.load=function(){var U=this;var S=function(ag,ab,ah){if(!ab){var ae=ag.parents();for(var af=0;af<ae.size();
af++){if(ae[af]._private.selected){return}}}var ai=ag.descendants();function ad(ak){while(ak.parent().nonempty()&&ak.parent().id()!==ag.id()){parent=ak.parent()[0];var aj=parent._private.style;if(aj.width.value!=="auto"||aj.height.value!=="auto"){return true}ak=ak.parent()}return false}for(var af=0;af<ai.size();af++){if((ab||!ai[af]._private.selected)){ai[af]._private.rscratch.inDragLayer=true;ah.push(ai[af]);for(var ac=0;ac<ai[af]._private.edges.length;ac++){ai[af]._private.edges[ac]._private.rscratch.inDragLayer=true
}}}};var V=function(ac,ad){ac._private.grabbed=true;ac._private.rscratch.inDragLayer=true;ad.push(ac);for(var ab=0;ab<ac._private.edges.length;ab++){ac._private.edges[ab]._private.rscratch.inDragLayer=true}};var Z=function(ag,ae){var af=ag;while(af.parent().nonempty()){af=af.parent()[0]}if(af==ag&&ae){return}var ab=af.descendants().add(af);for(var ad=0;ad<ab.size();ad++){ab[ad]._private.rscratch.inDragLayer=ae;for(var ac=0;ac<ab[ad]._private.edges.length;ac++){ab[ad]._private.edges[ac]._private.rscratch.inDragLayer=ae
}}};B.prototype.nodeIsDraggable=function(ab){if(ab._private.style.opacity.value!=0&&ab._private.style.visibility.value=="visible"&&!ab._private.locked&&ab._private.grabbable){return true}return false};U.registerBinding(window,"resize",function(ab){U.matchCanvasSize(U.data.container)},true);U.registerBinding(U.data.container,"contextmenu",function(ab){ab.preventDefault()});U.registerBinding(U.data.container,"mousedown",function(ae){ae.preventDefault();U.hoverData.capture=true;U.hoverData.which=ae.which;
var ab=U.data.cy;var ah=U.projectIntoViewport(ae.pageX,ae.pageY);var ai=U.data.select;var ad=U.findNearestElement(ah[0],ah[1],true);var ak=U.hoverData.down;var af=U.dragData.possibleDragElements;var ag=new A.Event(ae,{type:"grab"});if(ae.which==3){if(ad){ad.activate();ad.trigger(new A.Event(ae,{type:"cxttapstart"}));U.hoverData.down=ad;U.hoverData.downTime=(new Date()).getTime();U.hoverData.cxtDragged=false}}else{if(ae.which==1){if(ad){ad.activate()}if(ad!=null&&U.nodeIsDraggable(ad)){if(ad._private.group=="nodes"&&ad._private.selected==false){af=U.dragData.possibleDragElements=[];
V(ad,af);ad.trigger(ag);if(ad._private.style.width.value=="auto"||ad._private.style.height.value=="auto"){S(ad,true,af)}Z(ad,true)}if(ad._private.group=="nodes"&&ad._private.selected==true){af=U.dragData.possibleDragElements=[];var al=false;var aj=ab.$("node:selected");for(var ac=0;ac<aj.length;ac++){if(U.nodeIsDraggable(aj[ac])){V(aj[ac],af);if(!al){ad.trigger(ag);al=true}if(aj[ac]._private.style.width.value=="auto"||aj[ac]._private.style.height.value=="auto"){S(aj[ac],false,af)}Z(aj[ac],true)}}}ad.trigger(new A.Event(ae,{type:"mousedown"})).trigger(new A.Event(ae,{type:"tapstart"})).trigger(new A.Event(ae,{type:"vmousedown"}))
}else{if(ad==null){ab.trigger(new A.Event(ae,{type:"mousedown"})).trigger(new A.Event(ae,{type:"tapstart"})).trigger(new A.Event(ae,{type:"vmousedown"}))}}U.hoverData.down=ad;U.hoverData.downTime=(new Date()).getTime();if(ad==null||ad.isEdge()){ai[4]=1;var am=Math.max(0,r-(+new Date-U.hoverData.downTime));clearTimeout(U.bgActiveTimeout);U.bgActiveTimeout=setTimeout(function(){if(ad){ad.unactivate()}U.data.bgActivePosistion={x:ah[0],y:ah[1]};U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("bgactive");
U.redraw()},am)}}}ai[0]=ai[2]=ah[0];ai[1]=ai[3]=ah[1];U.redraw()},false);U.registerBinding(window,"mousemove",function(at){var ai=false;var ao=U.hoverData.capture;if(!ao){var aj=U.findContainerPageCoords();if(at.pageX>aj[0]&&at.pageX<aj[0]+U.data.container.clientWidth*G&&at.pageY>aj[1]&&at.pageY<aj[1]+U.data.container.clientHeight*G){}else{return}}var ad=U.data.cy;var ah=U.projectIntoViewport(at.pageX,at.pageY);var am=U.data.select;var au=U.findNearestElement(ah[0],ah[1],true);var ak=U.hoverData.last;
var al=U.hoverData.down;var ap=[ah[0]-am[2],ah[1]-am[3]];var an=U.getCachedNodes();var ac=U.getCachedEdges();var af=U.dragData.possibleDragElements;var ae=at.shiftKey;ai=true;var aq=new A.Event(at,{type:"mousemove"});if(au!=null){au.trigger(aq)}else{if(au==null){ad.trigger(aq)}}if(U.hoverData.which===3){var ag=new A.Event(at,{type:"cxtdrag"});if(al){al.trigger(ag)}else{ad.trigger(ag)}U.hoverData.cxtDragged=true}else{if(U.hoverData.dragging){ai=true;if(ad.panningEnabled()){var ab={x:ap[0]*ad.zoom(),y:ap[1]*ad.zoom()};
ad.panBy(ab)}ah=U.projectIntoViewport(at.pageX,at.pageY)}else{if(am[4]==1&&(al==null||al.isEdge())&&(!ad.boxSelectionEnabled()||+new Date-U.hoverData.downTime>=r)&&(Math.abs(am[3]-am[1])+Math.abs(am[2]-am[0])<4)&&ad.panningEnabled()){U.hoverData.dragging=true;am[4]=0}else{if(ad.boxSelectionEnabled()&&Math.pow(am[2]-am[0],2)+Math.pow(am[3]-am[1],2)>7&&am[4]){clearTimeout(U.bgActiveTimeout)}if(al&&al.isEdge()&&al.active()){al.unactivate()}if(au!=ak){if(ak){ak.trigger(new A.Event(at,{type:"mouseout"}))
}if(au){au.trigger(new A.Event(at,{type:"mouseover"}))}U.hoverData.last=au}if(al&&al.isNode()&&U.nodeIsDraggable(al)){U.dragData.didDrag=true;var av=[];for(var ar=0;ar<af.length;ar++){if(af[ar]._private.group=="nodes"&&U.nodeIsDraggable(af[ar])){af[ar]._private.position.x+=ap[0];af[ar]._private.position.y+=ap[1];av.push(af[ar])}}(new A.Collection(ad,av)).trigger(new A.Event(at,{type:"drag"})).trigger(new A.Event(at,{type:"position"}));if(am[2]==am[0]&&am[3]==am[1]){U.data.canvasNeedsRedraw[J]=true;
U.data.canvasRedrawReason[J].push("Node(s) and edge(s) moved to drag layer")}U.data.canvasNeedsRedraw[d]=true;U.data.canvasRedrawReason[d].push("Nodes dragged")}if(ad.boxSelectionEnabled()){U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("Mouse moved, redraw selection box")}ai=true}}}am[2]=ah[0];am[3]=ah[1];U.redraw();if(ai){if(at.stopPropagation){at.stopPropagation()}if(at.preventDefault){at.preventDefault()}at.cancelBubble=true;at.returnValue=false;return false}},false);U.registerBinding(window,"mouseup",function(aw){var ap=U.hoverData.capture;
if(!ap){return}U.hoverData.capture=false;var ac=U.data.cy;var ah=U.projectIntoViewport(aw.pageX,aw.pageY);var an=U.data.select;var ax=U.findNearestElement(ah[0],ah[1],true);var ao=U.getCachedNodes();var ab=U.getCachedEdges();var af=U.dragData.possibleDragElements;var aj=U.hoverData.down;var ae=aw.shiftKey;U.data.bgActivePosistion=undefined;clearTimeout(U.bgActiveTimeout);if(aj){aj.unactivate()}if(U.hoverData.which===3){var ag=new A.Event(aw,{type:"cxttapend"});if(aj){aj.trigger(ag)}else{ac.trigger(ag)
}if(!U.hoverData.cxtDragged){var am=new A.Event(aw,{type:"cxttap"});if(aj){aj.trigger(am)}else{ac.trigger(am)}}U.hoverData.cxtDragged=false;U.hoverData.which=null}else{if((aj==null)&&!U.dragData.didDrag&&!(Math.pow(an[2]-an[0],2)+Math.pow(an[3]-an[1],2)>7&&an[4])&&!U.hoverData.dragging){ac.$(":selected").unselect();if(af.length>0){U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("De-select")}U.dragData.possibleDragElements=af=[]}if(Math.pow(an[2]-an[0],2)+Math.pow(an[3]-an[1],2)==0){if(ax!=null){ax.trigger(new A.Event(aw,{type:"click"})).trigger(new A.Event(aw,{type:"tap"})).trigger(new A.Event(aw,{type:"vclick"}))
}else{if(ax==null){ac.trigger(new A.Event(aw,{type:"click"})).trigger(new A.Event(aw,{type:"tap"})).trigger(new A.Event(aw,{type:"vclick"}))}}}if(ax!=null){ax.trigger(new A.Event(aw,{type:"mouseup"})).trigger(new A.Event(aw,{type:"tapend"})).trigger(new A.Event(aw,{type:"vmouseup"}))}else{if(ax==null){ac.trigger(new A.Event(aw,{type:"mouseup"})).trigger(new A.Event(aw,{type:"tapend"})).trigger(new A.Event(aw,{type:"vmouseup"}))}}if(ax==aj&&!U.dragData.didDrag){if(ax!=null&&ax._private.selectable){if(!ae){ac.$(":selected").unselect()
}if(ax.selected()){ax.unselect()}else{ax.select()}Z(ax,false);U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("sglslct")}}else{if(ax==aj){if(ax!=null&&ax._private.grabbed){var aq=ac.$(":grabbed");for(var au=0;au<aq.length;au++){var ak=aq[au];ak._private.grabbed=false;var al=ak._private.edges;for(var at=0;at<al.length;at++){al[at]._private.rscratch.inDragLayer=false}Z(ak,false)}var av=new A.Event(aw,{type:"free"});aq.trigger(av)}}}if(ac.boxSelectionEnabled()&&Math.pow(an[2]-an[0],2)+Math.pow(an[3]-an[1],2)>7&&an[4]){if(!ae){ac.$(":selected").unselect()
}var ad=[];var ai=U.getAllInBox(an[0],an[1],an[2],an[3]);var ar=new A.Event(aw,{type:"select"});for(var au=0;au<ai.length;au++){if(ai[au]._private.selectable){af.push(ai[au]);ad.push(ai[au])}}(new A.Collection(ac,ad)).select();if(ai.length>0){U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("Selection")}}U.hoverData.dragging=false;if(!an[4]){var av=new A.Event(aw,{type:"free"});for(var au=0;au<af.length;au++){if(af[au]._private.group=="nodes"){af[au]._private.rscratch.inDragLayer=false;
var al=af[au]._private.edges;for(var at=0;at<al.length;at++){al[at]._private.rscratch.inDragLayer=false}Z(af[au],false)}else{if(af[au]._private.group=="edges"){af[au]._private.rscratch.inDragLayer=false}}}if(aj){aj.trigger(av)}U.data.canvasNeedsRedraw[d]=true;U.data.canvasRedrawReason[d].push("Node/nodes back from drag");U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("Node/nodes back from drag")}}an[4]=0;U.hoverData.down=null;U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("Mouse up, selection box gone");
U.dragData.didDrag=false;U.redraw()},false);var P=function(ad){var af=U.data.cy;var ae=U.projectIntoViewport(ad.pageX,ad.pageY);var ac=[ae[0]*af.zoom()+af.pan().x,ae[1]*af.zoom()+af.pan().y];if(U.zoomData.freeToZoom){ad.preventDefault();var ab=ad.wheelDeltaY/1000||ad.detail/-32;if(af.panningEnabled()&&af.zoomingEnabled()){af.zoom({level:af.zoom()*Math.pow(10,ab),position:{x:ac[0],y:ac[1]}})}U.data.wheel=true;clearTimeout(U.data.wheelTimeout);U.data.wheelTimeout=setTimeout(function(){U.data.wheel=false;
U.data.canvasNeedsRedraw[J]=true;U.redraw()},100)}};U.registerBinding(U.data.container,"mousewheel",P,true);U.registerBinding(U.data.container,"DOMMouseScroll",P,true);U.registerBinding(U.data.container,"MozMousePixelScroll",function(ab){if(U.zoomData.freeToZoom){ab.preventDefault()}},false);U.registerBinding(U.data.container,"mousemove",function(ab){if(U.zoomData.lastPointerX&&U.zoomData.lastPointerX!=ab.pageX&&!U.zoomData.freeToZoom){U.zoomData.freeToZoom=true}U.zoomData.lastPointerX=ab.pageX},false);
U.registerBinding(U.data.container,"mouseout",function(ab){U.zoomData.freeToZoom=false;U.zoomData.lastPointerX=null},false);U.registerBinding(U.data.container,"mouseout",function(ab){U.data.cy.trigger(new A.Event(ab,{type:"mouseout"}))},false);U.registerBinding(U.data.container,"mouseover",function(ab){U.data.cy.trigger(new A.Event(ab,{type:"mouseover"}))},false);var K,Q,W,aa;var X;var N,M;var O,Y;var R=U.data.container.clientWidth*G,T=U.data.container.clientHeight*G;var i;function L(ac,ae,ab,ad){return Math.sqrt((ab-ac)*(ab-ac)+(ad-ae)*(ad-ae))
}U.registerBinding(U.data.container,"touchstart",function(ax){if(ax.target!==U.data.link){ax.preventDefault()}U.touchData.capture=true;U.data.bgActivePosistion=undefined;var ae=U.data.cy;var ap=U.getCachedNodes();var ad=U.getCachedEdges();var ac=U.touchData.now;var au=U.touchData.earlier;if(ax.touches[0]){var ah=U.projectIntoViewport(ax.touches[0].pageX,ax.touches[0].pageY);ac[0]=ah[0];ac[1]=ah[1]}if(ax.touches[1]){var ah=U.projectIntoViewport(ax.touches[1].pageX,ax.touches[1].pageY);ac[2]=ah[0];
ac[3]=ah[1]}if(ax.touches[2]){var ah=U.projectIntoViewport(ax.touches[2].pageX,ax.touches[2].pageY);ac[4]=ah[0];ac[5]=ah[1]}if(ax.touches[1]){function aw(az){for(var aA=0;aA<az.length;aA++){az[aA]._private.grabbed=false;az[aA]._private.rscratch.inDragLayer=false;if(az[aA].active()){az[aA].unactivate()}}}aw(ap);aw(ad);var ag=U.findContainerPageCoords();Y=ag[1];O=ag[0];K=ax.touches[0].pageX-O;Q=ax.touches[0].pageY-Y;W=ax.touches[1].pageX-O;aa=ax.touches[1].pageY-Y;i=0<=K&&K<=R&&0<=W&&W<=R&&0<=Q&&Q<=T&&0<=aa&&aa<=T;
var ao=ae.pan();var ab=ae.zoom();X=L(K,Q,W,aa);N=[(K+W)/2,(Q+aa)/2];M=[(N[0]-ao.x)/ab,(N[1]-ao.y)/ab];if(X<100){var aj=U.findNearestElement(ac[0],ac[1],true);var ai=U.findNearestElement(ac[2],ac[3],true);var af=new A.Event(ax,{type:"cxttapstart"});if(aj&&aj.isNode()){aj.activate().trigger(af);U.touchData.start=aj}else{if(ai&&ai.isNode()){ai.activate().trigger(af);U.touchData.start=ai}else{ae.trigger(af);U.touchData.start=null}}if(U.touchData.start){U.touchData.start._private.grabbed=false}U.touchData.cxt=true;
U.touchData.cxtDragged=false;U.data.bgActivePosistion=undefined;U.redraw();return}}if(ax.touches[2]){}else{if(ax.touches[1]){}else{if(ax.touches[0]){var ay=U.findNearestElement(ac[0],ac[1],true);if(ay!=null){ay.activate();U.touchData.start=ay;if(ay._private.group=="nodes"&&U.nodeIsDraggable(ay)){var ak=U.dragData.touchDragEles=[];V(ay,ak);ay.trigger(new A.Event(ax,{type:"grab"}));if(ay.selected()){ak=U.dragData.touchDragEles=[];var am=ae.$("node:selected");for(var aq=0;aq<am.length;aq++){var av=am[aq];
if(U.nodeIsDraggable(av)){ak.push(av);av._private.rscratch.inDragLayer=true;var al=av._private.edges;for(var ar=0;ar<al.length;ar++){al[ar]._private.rscratch.inDragLayer=true}if(av._private.style.width.value=="auto"||av._private.style.height.value=="auto"){S(av,false,ak)}Z(av,true)}}}else{if(ay._private.style.width.value=="auto"||ay._private.style.height.value=="auto"){S(ay,true,ak)}Z(ay,true)}}ay.trigger(new A.Event(ax,{type:"touchstart"})).trigger(new A.Event(ax,{type:"tapstart"})).trigger(new A.Event(ax,{type:"vmousdown"}))
}if(ay==null){ae.trigger(new A.Event(ax,{type:"touchstart"})).trigger(new A.Event(ax,{type:"tapstart"})).trigger(new A.Event(ax,{type:"vmousedown"}));U.data.bgActivePosistion={x:ah[0],y:ah[1]};U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("bgactive")}for(var at=0;at<ac.length;at++){au[at]=ac[at];U.touchData.startPosition[at]=ac[at]}U.touchData.singleTouchMoved=false;U.touchData.singleTouchStartTime=o();var an=setTimeout(function(){if(U.touchData.singleTouchMoved==false&&o()-U.touchData.singleTouchStartTime>250){if(U.touchData.start){U.touchData.start.trigger(new A.Event(ax,{type:"taphold"}))
}else{U.data.cy.trigger(new A.Event(ax,{type:"taphold"}));ae.$(":selected").unselect()}}},1000)}}}U.redraw()},false);U.registerBinding(window,"touchmove",function(aK){var aD=U.data.select;var aq=U.touchData.capture;aq&&aK.preventDefault();var ao=U.data.cy;var az=U.getCachedNodes();var ai=U.getCachedEdges();var aC=U.touchData.now;var ac=U.touchData.earlier;if(aK.touches[0]){var au=U.projectIntoViewport(aK.touches[0].pageX,aK.touches[0].pageY);aC[0]=au[0];aC[1]=au[1]}if(aK.touches[1]){var au=U.projectIntoViewport(aK.touches[1].pageX,aK.touches[1].pageY);
aC[2]=au[0];aC[3]=au[1]}if(aK.touches[2]){var au=U.projectIntoViewport(aK.touches[2].pageX,aK.touches[2].pageY);aC[4]=au[0];aC[5]=au[1]}var ae=[];for(var aH=0;aH<aC.length;aH++){ae[aH]=aC[aH]-ac[aH]}if(aq&&U.touchData.cxt){var at=aK.touches[0].pageX-O,af=aK.touches[0].pageY-Y;var an=aK.touches[1].pageX-O,ab=aK.touches[1].pageY-Y;var ax=L(at,af,an,ab);var aI=ax/X;if(aI>=1.5||ax>=150){U.touchData.cxt=false;if(U.touchData.start){U.touchData.start.unactivate();U.touchData.start=null}U.data.bgActivePosistion=undefined;
U.data.canvasNeedsRedraw[F]=true;var ad=new A.Event(aK,{type:"cxttapend"});if(U.touchData.start){U.touchData.start.trigger(ad)}else{ao.trigger(ad)}}}if(aq&&U.touchData.cxt){var ad=new A.Event(aK,{type:"cxtdrag"});U.data.bgActivePosistion=undefined;U.data.canvasNeedsRedraw[F]=true;if(U.touchData.start){U.touchData.start.trigger(ad)}else{ao.trigger(ad)}if(U.touchData.start){U.touchData.start._private.grabbed=false}U.touchData.cxtDragged=true}else{if(aq&&aK.touches[2]&&ao.boxSelectionEnabled()){U.data.bgActivePosistion=undefined;
clearTimeout(this.threeFingerSelectTimeout);this.lastThreeTouch=+new Date;U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("Touch moved, redraw selection box");if(!aD||aD.length===0||aD[0]===undefined){aD[0]=(aC[0]+aC[2]+aC[4])/3;aD[1]=(aC[1]+aC[3]+aC[5])/3;aD[2]=(aC[0]+aC[2]+aC[4])/3+1;aD[3]=(aC[1]+aC[3]+aC[5])/3+1}else{aD[2]=(aC[0]+aC[2]+aC[4])/3;aD[3]=(aC[1]+aC[3]+aC[5])/3}aD[4]=1}else{if(aq&&aK.touches[1]&&ao.zoomingEnabled()&&ao.panningEnabled()){U.data.bgActivePosistion=undefined;
U.data.canvasNeedsRedraw[F]=true;var at=aK.touches[0].pageX-O,af=aK.touches[0].pageY-Y;var an=aK.touches[1].pageX-O,ab=aK.touches[1].pageY-Y;var ax=L(at,af,an,ab);var aI=ax/X;if(aI!=1&&i){var aM=at-K;var aL=af-Q;var ay=an-W;var aw=ab-aa;var aG=(aM+ay)/2;var aE=(aL+aw)/2;var ah=ao.zoom();var ag=ah*aI;var ak=ao.pan();var aB=M[0]*ah+ak.x;var aA=M[1]*ah+ak.y;var aj={x:-ag/ah*(aB-ak.x-aG)+aB,y:-ag/ah*(aA-ak.y-aE)+aA};ao._private.zoom=ag;ao._private.pan=aj;ao.trigger("pan zoom").notify("viewport");X=ax;
K=at;Q=af;W=an;aa=ab;U.pinching=true}if(aK.touches[0]){var au=U.projectIntoViewport(aK.touches[0].pageX,aK.touches[0].pageY);aC[0]=au[0];aC[1]=au[1]}if(aK.touches[1]){var au=U.projectIntoViewport(aK.touches[1].pageX,aK.touches[1].pageY);aC[2]=au[0];aC[3]=au[1]}if(aK.touches[2]){var au=U.projectIntoViewport(aK.touches[2].pageX,aK.touches[2].pageY);aC[4]=au[0];aC[5]=au[1]}}else{if(aK.touches[0]){var ar=U.touchData.start;var al=U.touchData.last;if(ar!=null&&ar._private.group=="nodes"&&U.nodeIsDraggable(ar)){var am=U.dragData.touchDragEles;
for(var aF=0;aF<am.length;aF++){var ap=am[aF];if(U.nodeIsDraggable(ap)){U.dragData.didDrag=true;ap._private.position.x+=ae[0];ap._private.position.y+=ae[1]}}(new A.Collection(ao,am)).trigger(new A.Event(aK,{type:"drag"})).trigger(new A.Event(aK,{type:"position"}));U.data.canvasNeedsRedraw[d]=true;U.data.canvasRedrawReason[d].push("touchdrag node");if(U.touchData.startPosition[0]==ac[0]&&U.touchData.startPosition[1]==ac[1]){U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("node drag started")
}}if(ar!=null){ar.trigger(new A.Event(aK,{type:"touchmove"}))}if(ar==null){var av=U.findNearestElement(aC[0],aC[1],true);if(av!=null){av.trigger(new A.Event(aK,{type:"touchmove"}))}if(av==null){ao.trigger(new A.Event(aK,{type:"touchmove"}))}}if(av!=al){if(al){al.trigger(new A.Event(aK,{type:"touchout"}))}if(av){av.trigger(new A.Event(aK,{type:"touchover"}))}}U.touchData.last=av;for(var aJ=0;aJ<aC.length;aJ++){if(aC[aJ]&&U.touchData.startPosition[aJ]&&Math.abs(aC[aJ]-U.touchData.startPosition[aJ])>4){U.touchData.singleTouchMoved=true
}}if(aq&&(ar==null||ar.isEdge())&&ao.panningEnabled()){if(ar){ar.unactivate();if(!U.data.bgActivePosistion){U.data.bgActivePosistion={x:aC[0],y:aC[1]}}U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("bgactive")}ao.panBy({x:ae[0]*ao.zoom(),y:ae[1]*ao.zoom()});U.swipePanning=true;var au=U.projectIntoViewport(aK.touches[0].pageX,aK.touches[0].pageY);aC[0]=au[0];aC[1]=au[1]}}}}}for(var aH=0;aH<aC.length;aH++){ac[aH]=aC[aH]}U.redraw()},false);U.registerBinding(window,"touchend",function(au){var am=U.touchData.capture;
if(!am){return}U.touchData.capture=false;au.preventDefault();var aj=U.data.select;U.swipePanning=false;var ae=U.data.cy;var al=U.getCachedNodes();var ad=U.getCachedEdges();var ac=U.touchData.now;var aq=U.touchData.earlier;var af=U.touchData.start;if(au.touches[0]){var ag=U.projectIntoViewport(au.touches[0].pageX,au.touches[0].pageY);ac[0]=ag[0];ac[1]=ag[1]}if(au.touches[1]){var ag=U.projectIntoViewport(au.touches[1].pageX,au.touches[1].pageY);ac[2]=ag[0];ac[3]=ag[1]}if(au.touches[2]){var ag=U.projectIntoViewport(au.touches[2].pageX,au.touches[2].pageY);
ac[4]=ag[0];ac[5]=ag[1]}if(U.touchData.cxt){ctxTapend=new A.Event(au,{type:"cxttapend"});if(af){af.unactivate();af.trigger(ctxTapend)}else{ae.trigger(ctxTapend)}if(!U.touchData.cxtDragged){var ak=new A.Event(au,{type:"cxttap"});if(af){af.trigger(ak)}else{ae.trigger(ak)}}if(U.touchData.start){U.touchData.start._private.grabbed=false}U.touchData.cxt=false;U.touchData.start=null;U.redraw();return}var ab=+new Date;if(!au.touches[2]&&ae.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);
this.threeFingerSelectTimeout=setTimeout(function(){var av=[];var ay=U.getAllInBox(aj[0],aj[1],aj[2],aj[3]);aj[0]=undefined;aj[1]=undefined;aj[2]=undefined;aj[3]=undefined;aj[4]=0;U.data.canvasNeedsRedraw[F]=true;U.data.canvasRedrawReason[F].push("Touch moved, redraw selection box");var ax=new A.Event(au,{type:"select"});for(var aw=0;aw<ay.length;aw++){if(ay[aw]._private.selectable){av.push(ay[aw])}}(new A.Collection(ae,av)).select();if(ay.length>0){U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("Selection")
}},100)}if(!au.touches[1]){U.pinching=false}var ao=false;if(af!=null){af._private.active=false;ao=true;af.trigger(new A.Event(au,{type:"unactivate"}))}if(au.touches[2]){U.data.bgActivePosistion=undefined}else{if(au.touches[1]){}else{if(au.touches[0]){}else{if(!au.touches[0]){U.data.bgActivePosistion=undefined;if(af!=null){if(af._private.grabbed==true){af._private.grabbed=false;af.trigger(new A.Event(au,{type:"free"}));af._private.rscratch.inDragLayer=false}var ai=af._private.edges;for(var ap=0;ap<ai.length;
ap++){ai[ap]._private.rscratch.inDragLayer=false}Z(af,false);if(af.selected()){var ah=ae.$("node:selected");for(var an=0;an<ah.length;an++){var ar=ah[an];ar._private.rscratch.inDragLayer=false;var ai=ar._private.edges;for(var ap=0;ap<ai.length;ap++){ai[ap]._private.rscratch.inDragLayer=false}Z(ar,false)}}U.data.canvasNeedsRedraw[d]=true;U.data.canvasRedrawReason[d].push("touchdrag node end");U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("touchdrag node end");af.trigger(new A.Event(au,{type:"touchend"})).trigger(new A.Event(au,{type:"tapend"})).trigger(new A.Event(au,{type:"vmouseup"}));
U.touchData.start=null}else{var at=U.findNearestElement(ac[0],ac[1],true);if(at!=null){at.trigger(new A.Event(au,{type:"touchend"})).trigger(new A.Event(au,{type:"tapend"})).trigger(new A.Event(au,{type:"vmouseup"}))}if(at==null){ae.trigger(new A.Event(au,{type:"touchend"})).trigger(new A.Event(au,{type:"tapend"})).trigger(new A.Event(au,{type:"vmouseup"}))}}if(af!=null&&!U.dragData.didDrag&&af._private.selectable&&(Math.sqrt(Math.pow(U.touchData.startPosition[0]-ac[0],2)+Math.pow(U.touchData.startPosition[1]-ac[1],2)))<6){if(af.selected()){af._private.selected=false;
af.trigger(new A.Event(au,{type:"unselect"}))}else{af._private.selected=true;af.trigger(new A.Event(au,{type:"select"}))}ao=true;U.data.canvasNeedsRedraw[J]=true;U.data.canvasRedrawReason[J].push("sglslct")}if(U.touchData.singleTouchMoved==false){if(af){af.trigger(new A.Event(au,{type:"tap"})).trigger(new A.Event(au,{type:"vclick"}))}else{ae.trigger(new A.Event(au,{type:"tap"})).trigger(new A.Event(au,{type:"vclick"}))}}U.touchData.singleTouchMoved=true}}}}for(var ap=0;ap<ac.length;ap++){aq[ap]=ac[ap]
}U.dragData.didDrag=false;if(ao&&af){af.updateStyle(false)}U.redraw()},false)};B.prototype.init=function(){};B.prototype.getCachedNodes=function(){var i=this.data;var K=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedNodes==undefined){i.cache.cachedNodes=K.nodes()}return i.cache.cachedNodes};B.prototype.updateNodesCache=function(){var i=this.data;var K=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedNodes=K.nodes()};B.prototype.getCachedEdges=function(){var i=this.data;
var K=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedEdges==undefined){i.cache.cachedEdges=K.edges()}return i.cache.cachedEdges};B.prototype.updateEdgesCache=function(){var i=this.data;var K=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedEdges=K.edges()};B.prototype.projectIntoViewport=function(L,i){n=this.data.container;var O=false;var M=this.findContainerPageCoords();var N=M[0];var K=M[1];x=L-N;y=i-K;x*=G;y*=G;x-=this.data.cy.pan().x;y-=this.data.cy.pan().y;x/=this.data.cy.zoom();
y/=this.data.cy.zoom();return[x,y]};B.prototype.findContainerPageCoords=function(){var i,P;var M=0;var L=0;var O;O=this.data.container;var N=false;while(O!=null){var K=window.getComputedStyle(O);if(K.getPropertyValue("position").toLowerCase()==="fixed"){M=O.offsetLeft+window.scrollX;L=O.offsetTop+window.scrollY;O=null}else{if(typeof(O.offsetLeft)=="number"){M+=O.offsetLeft;L+=O.offsetTop;if(O==document.body||O==document.header){N=true}if(!N){M-=O.scrollLeft;L-=O.scrollTop}}}if(O){O=O.offsetParent
}}return[M,L]};B.prototype.findNearestElement=function(Y,X,M){var T=this.data;var N=this.getCachedNodes();var R=this.getCachedEdges();var U=[];var Z=this.data.cy.zoom();var P=(z?256:32)/Z;var W=(z?16:0)/Z;for(var S=0;S<N.length;S++){if(s[this.getNodeShape(N[S])].checkPointRough(Y,X,N[S]._private.style["border-width"].value,this.getNodeWidth(N[S])+W,this.getNodeHeight(N[S])+W,N[S]._private.position.x,N[S]._private.position.y)&&s[this.getNodeShape(N[S])].checkPoint(Y,X,N[S]._private.style["border-width"].value,(this.getNodeWidth(N[S])+W)/2,(this.getNodeHeight(N[S])+W)/2,N[S]._private.position.x,N[S]._private.position.y)){if(M){if(N[S]._private.style.opacity.value!=0&&N[S]._private.style.visibility.value=="visible"){U.push(N[S])
}}else{U.push(N[S])}}}var L;for(var S=0;S<R.length;S++){var O=R[S];var Q=O._private.rscratch;L=false;if(Q.edgeType=="self"){if((this.inBezierVicinity(Y,X,Q.startX,Q.startY,Q.cp2ax,Q.cp2ay,Q.selfEdgeMidX,Q.selfEdgeMidY,Math.pow(O._private.style.width.value/2,2))&&(Math.pow(R[S]._private.style.width.value/2,2)+P>this.sqDistanceToQuadraticBezier(Y,X,Q.startX,Q.startY,Q.cp2ax,Q.cp2ay,Q.selfEdgeMidX,Q.selfEdgeMidY)))||(this.inBezierVicinity(Y,X,Q.selfEdgeMidX,Q.selfEdgeMidY,Q.cp2cx,Q.cp2cy,Q.endX,Q.endY,Math.pow(R[S]._private.style.width.value/2,2))&&(Math.pow(R[S]._private.style.width.value/2,2)+P>this.sqDistanceToQuadraticBezier(Y,X,Q.selfEdgeMidX,Q.selfEdgeMidY,Q.cp2cx,Q.cp2cy,Q.endX,Q.endY)))){L=true
}}else{if(Q.edgeType=="straight"){if(this.inLineVicinity(Y,X,Q.startX,Q.startY,Q.endX,Q.endY,R[S]._private.style.width.value*2)&&Math.pow(R[S]._private.style.width.value/2,2)+P>this.sqDistanceToFiniteLine(Y,X,Q.startX,Q.startY,Q.endX,Q.endY)){L=true}}else{if(Q.edgeType=="bezier"){if(this.inBezierVicinity(Y,X,Q.startX,Q.startY,Q.cp2x,Q.cp2y,Q.endX,Q.endY,Math.pow(R[S]._private.style.width.value/2,2))&&(Math.pow(R[S]._private.style.width.value/2,2)+P>this.sqDistanceToQuadraticBezier(Y,X,Q.startX,Q.startY,Q.cp2x,Q.cp2y,Q.endX,Q.endY))){L=true
}}}}if(!U.length||U[U.length-1]!=R[S]){if((b[R[S]._private.style["source-arrow-shape"].value].roughCollide(Y,X,R[S]._private.rscratch.arrowStartX,R[S]._private.rscratch.arrowStartY,this.getArrowWidth(R[S]._private.style.width.value),this.getArrowHeight(R[S]._private.style.width.value),[R[S]._private.rscratch.arrowStartX-R[S].source()[0]._private.position.x,R[S]._private.rscratch.arrowStartY-R[S].source()[0]._private.position.y],0)&&b[R[S]._private.style["source-arrow-shape"].value].collide(Y,X,R[S]._private.rscratch.arrowStartX,R[S]._private.rscratch.arrowStartY,this.getArrowWidth(R[S]._private.style.width.value),this.getArrowHeight(R[S]._private.style.width.value),[R[S]._private.rscratch.arrowStartX-R[S].source()[0]._private.position.x,R[S]._private.rscratch.arrowStartY-R[S].source()[0]._private.position.y],0))||(b[R[S]._private.style["target-arrow-shape"].value].roughCollide(Y,X,R[S]._private.rscratch.arrowEndX,R[S]._private.rscratch.arrowEndY,this.getArrowWidth(R[S]._private.style.width.value),this.getArrowHeight(R[S]._private.style.width.value),[R[S]._private.rscratch.arrowEndX-R[S].target()[0]._private.position.x,R[S]._private.rscratch.arrowEndY-R[S].target()[0]._private.position.y],0)&&b[R[S]._private.style["target-arrow-shape"].value].collide(Y,X,R[S]._private.rscratch.arrowEndX,R[S]._private.rscratch.arrowEndY,this.getArrowWidth(R[S]._private.style.width.value),this.getArrowHeight(R[S]._private.style.width.value),[R[S]._private.rscratch.arrowEndX-R[S].target()[0]._private.position.x,R[S]._private.rscratch.arrowEndY-R[S].target()[0]._private.position.y],0))){L=true
}}if(L){if(M){var K=T.cy.getElementById(R[S]._private.data.source);var V=T.cy.getElementById(R[S]._private.data.target);if(R[S]._private.style.opacity.value!=0&&R[S]._private.style.visibility.value=="visible"&&K._private.style.opacity.value!=0&&K._private.style.visibility.value=="visible"&&V._private.style.opacity.value!=0&&V._private.style.visibility.value=="visible"){U.push(R[S])}}else{U.push(R[S])}}}U.sort(E);if(U.length>0){return U[U.length-1]}else{return null}};B.prototype.getAllInBox=function(M,W,K,V){var R=this.data;
var L=this.getCachedNodes();var P=this.getCachedEdges();var S=[];var U=Math.min(M,K);var O=Math.max(M,K);var X=Math.min(W,V);var T=Math.max(W,V);M=U;K=O;W=X;V=T;var N;for(var Q=0;Q<L.length;Q++){if(s[this.getNodeShape(L[Q])].intersectBox(M,W,K,V,this.getNodeWidth(L[Q]),this.getNodeHeight(L[Q]),L[Q]._private.position.x,L[Q]._private.position.y,L[Q]._private.style["border-width"].value/2)){S.push(L[Q])}}for(var Q=0;Q<P.length;Q++){if(P[Q]._private.rscratch.edgeType=="self"){if((N=this.boxInBezierVicinity(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2ax,P[Q]._private.rscratch.cp2ay,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value))&&(N==2||(N==1&&this.checkBezierInBox(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2ax,P[Q]._private.rscratch.cp2ay,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value)))||(N=this.boxInBezierVicinity(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2cx,P[Q]._private.rscratch.cp2cy,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value))&&(N==2||(N==1&&this.checkBezierInBox(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2cx,P[Q]._private.rscratch.cp2cy,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value)))){S.push(P[Q])
}}if(P[Q]._private.rscratch.edgeType=="bezier"&&(N=this.boxInBezierVicinity(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2x,P[Q]._private.rscratch.cp2y,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value))&&(N==2||(N==1&&this.checkBezierInBox(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.cp2x,P[Q]._private.rscratch.cp2y,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value)))){S.push(P[Q])
}if(P[Q]._private.rscratch.edgeType=="straight"&&(N=this.boxInBezierVicinity(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.startX*0.5+P[Q]._private.rscratch.endX*0.5,P[Q]._private.rscratch.startY*0.5+P[Q]._private.rscratch.endY*0.5,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value))&&(N==2||(N==1&&this.checkStraightEdgeInBox(M,W,K,V,P[Q]._private.rscratch.startX,P[Q]._private.rscratch.startY,P[Q]._private.rscratch.endX,P[Q]._private.rscratch.endY,P[Q]._private.style.width.value)))){S.push(P[Q])
}}return S};B.prototype.updateAllCompounds=function(N){for(var K=N.length-1;K>=0;K--){if(N[K].isNode()&&(N[K]._private.style.width.value=="auto"||N[K]._private.style.height.value=="auto")&&N[K].children().length>0){var M=N[K];var L=this.calcCompoundBounds(M);M._private.position.x=L.x;M._private.position.y=L.y;M._private.autoWidth=L.width;M._private.autoHeight=L.height}}};B.prototype.calcCompoundBounds=function(Q){var P=Q.descendants().not(":removed");var K={x:Q._private.position.x,y:Q._private.position.y,width:Q._private.autoWidth,height:Q._private.autoHeight};
if(Q._private.style.visibility.value!="visible"){return K}var L=[];for(var S=0;S<P.size();S++){if(P[S]._private.style.visibility.value=="visible"){L.push(P[S])}}if(L.length==0){return K}P=L;var M=this.borderValue(P,"left");var T=this.borderValue(P,"right");var R=this.borderValue(P,"top");var O=this.borderValue(P,"bottom");var W=this.getNodePadding(Q);var V=(M-W.left+T+W.right)/2;var U=(R-W.top+O+W.bottom)/2;var N=(T-M)+W.left+W.right;var X=(O-R)+W.top+W.bottom;K={x:V,y:U,width:N,height:X};return K
};B.prototype.borderValue=function(M,U){var Q,L;var V=1/0,S=-1/0;var i=this;var T=function(Y){var X={};X.x=Y._private.position.x;X.y=Y._private.position.y;X.width=Y.outerWidth();X.height=Y.outerHeight();return X};var O=function(Y){var Z=String(Y._private.style.content.value);var aa=Y._private.style["text-transform"].value;if(aa=="none"){}else{if(aa=="uppercase"){Z=Z.toUpperCase()}else{if(aa=="lowercase"){Z=Z.toLowerCase()}}}var X=i.data.canvases[4].getContext("2d");return X.measureText(Z).width};
var W=function(ab){var Z={};var X=i.getNodeWidth(ab);var ac=i.getNodeHeight(ab);Z.height=ab._private.style["font-size"].value;Z.width=Z.height;var aa=ab._private.style["text-halign"].strValue;if(aa=="left"){Z.x=ab._private.position.x-X/2;Z.left=Z.x-Z.width;Z.right=Z.x}else{if(aa=="right"){Z.x=ab._private.position.x+X/2;Z.left=Z.x;Z.right=Z.x+Z.width}else{Z.x=ab._private.position.x;Z.left=Z.x-Z.width/2;Z.right=Z.x+Z.width/2}}var Y=ab._private.style["text-valign"].strValue;if(Y=="top"){Z.y=ab._private.position.y-ac/2;
Z.top=Z.y-Z.height;Z.bottom=Z.y}else{if(Y=="bottom"){Z.y=ab._private.position.y+ac/2;Z.top=Z.y;Z.bottom=Z.y+Z.height}else{Z.y=ab._private.position.y;Z.top=Z.y-Z.height/2;Z.bottom=Z.y+Z.height/2}}return Z};for(H=0;H<M.length;H++){Q=T(M[H]);L=W(M[H]);if(U=="left"){var K=Math.min(Q.x-Q.width/2,L.left);if(K<V){V=K}}else{if(U=="right"){var R=Math.max(Q.x+Q.width/2,L.right);if(R>S){S=R}}else{if(U=="top"){var P=Math.min(Q.y-Q.height/2,L.top);if(P<V){V=P}}else{if(U=="bottom"){var N=Math.max(Q.y+Q.height/2,L.bottom);
if(N>S){S=N}}}}}}if((U=="left")||(U=="top")){return V}else{return S}};B.prototype.getNodeWidth=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoWidth}else{return i._private.style.width.value}};B.prototype.getNodeHeight=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoHeight}else{return i._private.style.height.value}};B.prototype.getNodeShape=function(K){var i=K._private.style.shape.value;
if(K.isParent()){if(i==="rectangle"||i==="roundrectangle"){return i}else{return"rectangle"}}return i};B.prototype.getNodePadding=function(L){var N=L._private.style["padding-left"].value;var K=L._private.style["padding-right"].value;var M=L._private.style["padding-top"].value;var i=L._private.style["padding-bottom"].value;if(isNaN(N)){N=0}if(isNaN(K)){K=0}if(isNaN(M)){M=0}if(isNaN(i)){i=0}return{left:N,right:K,top:M,bottom:i}};var f;B.prototype.matchCanvasSize=function(i,K){clearTimeout(f);var L=this;
f=setTimeout(function(){L._matchCanvasSize(i,K)},250)};B.prototype._matchCanvasSize=function(K,T){var P=this.data;var L=K.clientWidth;var R=K.clientHeight;var M,N=L,Q=R,S=false;N*=G;Q*=G;for(var O=0;O<e;O++){M=P.canvases[O];if(M.width!==N||M.height!==Q){M.width=N;M.height=Q;M.style.width=L+"px";M.style.height=R+"px";S=true}}for(var O=0;O<a;O++){M=P.bufferCanvases[O];if(M.width!==N||M.height!==Q){M.width=N;M.height=Q;S=true}}this.data.overlay.style.width=L+"px";this.data.overlay.style.height=R+"px";
if(S){this.data.canvasNeedsRedraw[J]=true;this.data.canvasNeedsRedraw[w]=true;this.redraw()}};var g=function(i){if(i._private.group=="nodes"){return i.parents().size()}else{if(i._private.group=="edges"){return Math.max(i.source()[0].parents().size(),i.target()[0].parents().size())}else{return 0}}};B.prototype.getCachedZSortedEles=function(){var P=this.lastZOrderCachedNodes;var O=this.lastZOrderCachedEdges;var M=this.getCachedNodes();var L=this.getCachedEdges();var K=[];if(!P||!O||P!==M||O!==L){for(var N=0;
N<M.length;N++){K.push(M[N])}for(var N=0;N<L.length;N++){K.push(L[N])}K.sort(E);this.cachedZSortedEles=K}else{K=this.cachedZSortedEles}this.lastZOrderCachedNodes=M;this.lastZOrderCachedEdges=L;return K};var E=function(L,K){var i=L._private.style["z-index"].value-K._private.style["z-index"].value;var N=0;var M=0;if(L.cy().hasCompoundNodes()){N=g(L);M=g(K)}if(N-M===0){if(L._private.group==="nodes"&&K._private.group==="edges"){return 1}else{if(L._private.group==="edges"&&K._private.group==="nodes"){return -1
}else{if(i===0){return L._private.index-K._private.index}else{return i}}}}else{return N-M}return 0};B.prototype.redraw=function(O,M){var i=this;if(this.averageRedrawTime===undefined){this.averageRedrawTime=0}var L=1000/60;var Q=1000;var P=this.averageRedrawTime;P=Math.max(L,P);P=Math.min(P,Q);if(this.lastDrawTime===undefined){this.lastDrawTime=0}var R=+new Date;var K=R-this.lastDrawTime;var N=K>=P;if(!O){if(!N){clearTimeout(this.redrawTimeout);this.redrawTimeout=setTimeout(function(){i.redraw()},P);
return}this.lastDrawTime=R}setTimeout(function(){var ai=R;var ad=100;var W=i.data.cy;var ao=i.data;var ak=i.getCachedNodes();var V=i.getCachedEdges();i.matchCanvasSize(ao.container);var ah=[];for(var al=0;al<ak.length;al++){ah.push(ak[al])}for(var al=0;al<V.length;al++){ah.push(V[al])}if(ao.canvasNeedsRedraw[d]||ao.canvasNeedsRedraw[J]||M){if(i.hideEdgesOnViewport&&(i.pinching||i.hoverData.dragging||i.data.wheel||i.swipePanning)){}else{i.findEdgeControlPoints(V)}var ah=i.getCachedZSortedEles();if(W.hasCompoundNodes()){i.updateAllCompounds(ah)
}}var ab;var Y;var U;if(ao.canvasNeedsRedraw[J]||M){if(!ab||!Y){ab=[];Y=[];for(var ae=0;ae<ah.length;ae++){U=ah[ae];if(U._private.rscratch.inDragLayer){ab.push(U)}else{Y.push(U)}}}var X=O||ao.canvases[J].getContext("2d");X.setTransform(1,0,0,1,0,0);X.clearRect(0,0,X.canvas.width,X.canvas.height);if(!M){X.translate(W.pan().x,W.pan().y);X.scale(W.zoom(),W.zoom())}for(var ae=0;ae<Y.length;ae++){U=Y[ae];if(U._private.group=="nodes"){i.drawNode(X,U)}else{if(U._private.group=="edges"){i.drawEdge(X,U)}}}for(var ae=0;
ae<Y.length;ae++){U=Y[ae];if(U._private.group=="nodes"){i.drawNodeText(X,U)}else{if(U._private.group=="edges"){i.drawEdgeText(X,U)}}if(U._private.group=="nodes"){i.drawNode(X,U,true)}else{if(U._private.group=="edges"){i.drawEdge(X,U,true)}}}if(!M){ao.canvasNeedsRedraw[J]=false;ao.canvasRedrawReason[J]=[]}}if(ao.canvasNeedsRedraw[d]||M){if(!ab||!Y){ab=[];Y=[];for(var ae=0;ae<ah.length;ae++){U=ah[ae];if(U._private.rscratch.inDragLayer){ab.push(U)}else{Y.push(U)}}}var X=O||ao.canvases[d].getContext("2d");
if(!M){X.setTransform(1,0,0,1,0,0);X.clearRect(0,0,X.canvas.width,X.canvas.height);X.translate(W.pan().x,W.pan().y);X.scale(W.zoom(),W.zoom())}var U;for(var ae=0;ae<ab.length;ae++){U=ab[ae];if(U._private.group=="nodes"){i.drawNode(X,U)}else{if(U._private.group=="edges"){i.drawEdge(X,U)}}}for(var ae=0;ae<ab.length;ae++){U=ab[ae];if(U._private.group=="nodes"){i.drawNodeText(X,U)}else{if(U._private.group=="edges"){i.drawEdgeText(X,U)}}if(U._private.group=="nodes"){i.drawNode(X,U,true)}else{if(U._private.group=="edges"){i.drawEdge(X,U,true)
}}}if(!M){ao.canvasNeedsRedraw[d]=false;ao.canvasRedrawReason[d]=[]}}if(ao.canvasNeedsRedraw[F]){var X=O||ao.canvases[F].getContext("2d");if(!M){X.setTransform(1,0,0,1,0,0);X.clearRect(0,0,X.canvas.width,X.canvas.height);X.translate(W.pan().x,W.pan().y);X.scale(W.zoom(),W.zoom())}var T=W.style()._private.coreStyle;if(ao.select[4]==1){var S=ao.cy.zoom();var ap=T["selection-box-border-width"].value/S;X.lineWidth=ap;X.fillStyle="rgba("+T["selection-box-color"].value[0]+","+T["selection-box-color"].value[1]+","+T["selection-box-color"].value[2]+","+T["selection-box-opacity"].value+")";
X.fillRect(ao.select[0],ao.select[1],ao.select[2]-ao.select[0],ao.select[3]-ao.select[1]);if(ap>0){X.strokeStyle="rgba("+T["selection-box-border-color"].value[0]+","+T["selection-box-border-color"].value[1]+","+T["selection-box-border-color"].value[2]+","+T["selection-box-opacity"].value+")";X.strokeRect(ao.select[0],ao.select[1],ao.select[2]-ao.select[0],ao.select[3]-ao.select[1])}}if(ao.bgActivePosistion){var S=ao.cy.zoom();var ac=ao.bgActivePosistion;X.fillStyle="rgba("+T["active-bg-color"].value[0]+","+T["active-bg-color"].value[1]+","+T["active-bg-color"].value[2]+","+T["active-bg-opacity"].value+")";
X.beginPath();X.arc(ac.x,ac.y,T["active-bg-size"].pxValue/S,0,2*Math.PI);X.fill()}if(!M){ao.canvasNeedsRedraw[F]=false;ao.canvasRedrawReason[F]=[]}}if(i.options.showOverlay){var X=ao.canvases[w].getContext("2d");X.lineJoin="round";X.font="14px helvetica";X.strokeStyle="#fff";X.lineWidth="4";X.fillStyle="#666";X.textAlign="right";var ag="cytoscape.js";var af=X.canvas.width;var am=X.canvas.height;var aj=4;var an=X.measureText(ag).width;var aa=14;X.clearRect(0,0,af,am);X.strokeText(ag,af-aj,am-aj);X.fillText(ag,af-aj,am-aj);
ao.overlayDrawn=true}var Z=+new Date;if(i.averageRedrawTime===undefined){i.averageRedrawTime=Z-ai}i.averageRedrawTime=i.averageRedrawTime/2+(Z-ai)/2},0)};var m={};var j=30*300;B.prototype.getCachedImage=function(K,L){if(m[K]&&m[K].image){m[K].keepTime=j;return m[K].image}var i=m[K];if(i==undefined){m[K]=new Object();m[K].image=new Image();m[K].image.onload=L;m[K].image.src=K;m[K].keepTime=j;i=m[K]}return i.image};B.prototype.swapCachedImage=function(K){if(m[K]){if(m[K].image&&m[K].image.complete){var L=m[K].image;
var i=document.createElement("canvas");i.width=L.width;i.height=L.height;i.getContext("2d").drawImage(L,0,0);m[K].image=i;m[K].swappedWithCanvas=true;return i}else{return null}}else{return null}};B.prototype.updateImageCaches=function(){for(var i in m){if(m[i].keepTime<=0){if(m[i].image!=undefined){m[i].image.src=undefined;m[i].image=undefined}m[i]=undefined}else{m[i]-=1}}};B.prototype.drawImage=function(i,Q,P,N,M,R,L){L.widthScale=0.5;L.heightScale=0.5;L.rotate=R;var O;var K;canvas.drawImage(L,Q,P)
};B.prototype.drawEdge=function(L,N,O){if(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){return}var P,T;P=N.source()[0];T=N.target()[0];if(N._private.style.visibility.value!="visible"||P._private.style.visibility.value!="visible"||T._private.style.visibility.value!="visible"){return}var X=N._private.style["overlay-padding"].value;var V=N._private.style["overlay-opacity"].value;var W=N._private.style["overlay-color"].value;
if(O){L.strokeStyle="rgba( "+W[0]+", "+W[1]+", "+W[2]+", "+V+" )";L.lineCap="round";if(N._private.rscratch.edgeType=="self"){L.lineCap="butt"}}else{L.strokeStyle="rgba("+N._private.style["line-color"].value[0]+","+N._private.style["line-color"].value[1]+","+N._private.style["line-color"].value[2]+","+N._private.style.opacity.value+")"}if(N._private.style.width.value<=0){return}var U=N._private.style.width.value+(O?2*X:0);var R=O?"solid":N._private.style["line-style"].value;L.lineWidth=U;this.findEndpoints(N);
if(N._private.rscratch.edgeType=="self"){var i=N._private.rscratch;this.drawStyledEdge(N,L,[i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY],R,U);this.drawStyledEdge(N,L,[i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY],R,U)}else{if(N._private.rscratch.edgeType=="straight"){var M=T._private.position.x-P._private.position.x;var K=T._private.position.y-P._private.position.y;var S=N._private.rscratch.endX-N._private.rscratch.startX;var Q=N._private.rscratch.endY-N._private.rscratch.startY;
if(M*S+K*Q<0){N._private.rscratch.straightEdgeTooShort=true}else{var i=N._private.rscratch;this.drawStyledEdge(N,L,[i.startX,i.startY,i.endX,i.endY],R,U);N._private.rscratch.straightEdgeTooShort=false}}else{var i=N._private.rscratch;this.drawStyledEdge(N,L,[i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY],R,U)}}if(N._private.rscratch.noArrowPlacement!==true&&N._private.rscratch.startX!==undefined){this.drawArrowheads(L,N,O)}};var v=function(S,O,M){var L=Math.sqrt(Math.pow(S[4]-S[0],2)+Math.pow(S[5]-S[1],2));
L+=Math.sqrt(Math.pow((S[4]+S[0])/2-S[2],2)+Math.pow((S[5]+S[1])/2-S[3],2));var R=Math.ceil(L/O);var K=L/O;var P;if(R>0){P=new Array(R*2)}else{return null}for(var N=0;N<R;N++){var Q=N/R;P[N*2]=S[0]*(1-Q)*(1-Q)+2*(S[2])*(1-Q)*Q+S[4]*(Q)*(Q);P[N*2+1]=S[1]*(1-Q)*(1-Q)+2*(S[3])*(1-Q)*Q+S[5]*(Q)*(Q)}return P};var u=function(S,O,M){var L=Math.sqrt(Math.pow(S[2]-S[0],2)+Math.pow(S[3]-S[1],2));var R=Math.ceil(L/O);var P;if(R>0){P=new Array(R*2)}else{return null}var K=[S[2]-S[0],S[3]-S[1]];for(var N=0;N<R;
N++){var Q=N/R;P[N*2]=K[0]*Q+S[0];P[N*2+1]=K[1]*Q+S[1]}return P};var t=function(L,i,K){pt1=_genpts(L,i);pt2=_genpts(L,K)};B.prototype.createBuffer=function(K,L){var i=document.createElement("canvas");i.width=K;i.height=L;return[i,i.getContext("2d")]};B.prototype.drawStyledEdge=function(R,N,ae,O,X){var M=this.data.cy;var L=M.zoom();function ad(ah,ag,af,i){return(1-i)*(1-i)*ah+2*(1-i)*i*ag+i*i*af}if(R._private.rstyle.bezierPts===undefined){R._private.rstyle.bezierPts=[]}var Z=R._private.rstyle.bezierPts.length;
if(R.isLoop()){if(Z>=12){R._private.rstyle.bezierPts=[]}else{}}else{R._private.rstyle.bezierPts=[]}var U=R._private.rstyle.bezierPts;if(ae.length===6){U.push({x:ad(ae[0],ae[2],ae[4],0.05),y:ad(ae[1],ae[3],ae[5],0.05)});U.push({x:ad(ae[0],ae[2],ae[4],0.25),y:ad(ae[1],ae[3],ae[5],0.25)});U.push({x:ad(ae[0],ae[2],ae[4],0.35),y:ad(ae[1],ae[3],ae[5],0.35)});U.push({x:ad(ae[0],ae[2],ae[4],0.65),y:ad(ae[1],ae[3],ae[5],0.65)});U.push({x:ad(ae[0],ae[2],ae[4],0.75),y:ad(ae[1],ae[3],ae[5],0.75)});U.push({x:ad(ae[0],ae[2],ae[4],0.95),y:ad(ae[1],ae[3],ae[5],0.95)})
}if(O=="solid"){N.beginPath();N.moveTo(ae[0],ae[1]);if(ae.length==3*2){N.quadraticCurveTo(ae[2],ae[3],ae[4],ae[5])}else{N.lineTo(ae[2],ae[3])}N.stroke()}else{if(O=="dotted"){var W;if(ae.length==3*2){W=v(ae,16,true)}else{W=u(ae,16,true)}if(!W){return}var Q=Math.max(X*1.6,3.4)*L;var P=Q*2,T=Q*2;P=Math.max(P,1);T=Math.max(T,1);var aa=this.createBuffer(P,T);var Y=aa[1];Y.setTransform(1,0,0,1,0,0);Y.clearRect(0,0,P,T);Y.fillStyle=N.strokeStyle;Y.beginPath();Y.arc(P/2,T/2,Q*0.5,0,Math.PI*2,false);Y.fill();
N.beginPath();for(var ab=0;ab<W.length/2;ab++){N.drawImage(aa[0],W[ab*2]-P/2/L,W[ab*2+1]-T/2/L,P/L,T/L)}}else{if(O=="dashed"){var W;if(ae.length==3*2){W=v(ae,14,true)}else{W=u(ae,14,true)}if(!W){return}var P=X*2*L;var T=7.8*L;P=Math.max(P,1);T=Math.max(T,1);var aa=this.createBuffer(P,T);var Y=aa[1];Y.setTransform(1,0,0,1,0,0);Y.clearRect(0,0,P,T);if(N.strokeStyle){Y.strokeStyle=N.strokeStyle}Y.lineWidth=X*M.zoom();Y.beginPath();Y.moveTo(P/2,T*0.2);Y.lineTo(P/2,T*0.8);Y.stroke();var K=false;var S,ac;
if(ae.length==2*2){S=[ae[2]-ae[0],ae[3]-W[1]];ac=Math.acos((S[0]*0+S[1]*-1)/Math.sqrt(S[0]*S[0]+S[1]*S[1]));if(S[0]<0){ac=-ac+2*Math.PI}}else{if(ae.length==3*2){K=true}}for(var ab=0;ab<W.length/2;ab++){var V=ab/(Math.max(W.length/2-1,1));if(K){S=[2*(1-V)*(ae[2]-ae[0])+2*V*(ae[4]-ae[2]),2*(1-V)*(ae[3]-ae[1])+2*V*(ae[5]-ae[3])];ac=Math.acos((S[0]*0+S[1]*-1)/Math.sqrt(S[0]*S[0]+S[1]*S[1]));if(S[0]<0){ac=-ac+2*Math.PI}}N.translate(W[ab*2],W[ab*2+1]);N.rotate(ac);N.translate(-P/2/L,-T/2/L);N.drawImage(aa[0],0,0,P/L,T/L);
N.translate(P/2/L,T/2/L);N.rotate(-ac);N.translate(-W[ab*2],-W[ab*2+1])}}else{this.drawStyledEdge(R,N,ae,"solid",X)}}}};B.prototype.drawEdgeText=function(L,M){if(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){return}if(M._private.style.visibility.value!="visible"){return}var O=M._private.style["font-size"].pxValue*M.cy().zoom();var K=M._private.style["min-zoomed-font-size"].pxValue;if(O<K){return}L.textAlign="center";
L.textBaseline="middle";var P,N;var R,Q;if(M._private.rscratch.edgeType=="self"){R=M._private.rscratch.selfEdgeMidX;Q=M._private.rscratch.selfEdgeMidY}else{if(M._private.rscratch.edgeType=="straight"){R=(M._private.rscratch.startX+M._private.rscratch.endX)/2;Q=(M._private.rscratch.startY+M._private.rscratch.endY)/2}else{if(M._private.rscratch.edgeType=="bezier"){R=0.25*M._private.rscratch.startX+2*0.5*0.5*M._private.rscratch.cp2x+(0.5*0.5)*M._private.rscratch.endX;Q=Math.pow(1-0.5,2)*M._private.rscratch.startY+2*(1-0.5)*0.5*M._private.rscratch.cp2y+(0.5*0.5)*M._private.rscratch.endY
}}}P=R;N=Q;var i=M._private.rstyle;i.labelX=P;i.labelY=N;this.drawText(L,M,P,N)};B.prototype.drawNode=function(N,P,O){var X,M;if(P._private.style.visibility.value!="visible"){return}var Z=1;var V=P.parents();for(var R=0;R<V.length;R++){var W=V[R];var S=W._private.style.opacity.value;Z=S*Z;if(S===0){return}}X=this.getNodeWidth(P);M=this.getNodeHeight(P);if(O===undefined||!O){N.fillStyle="rgba("+P._private.style["background-color"].value[0]+","+P._private.style["background-color"].value[1]+","+P._private.style["background-color"].value[2]+","+(P._private.style["background-opacity"].value*P._private.style.opacity.value*Z)+")";
N.strokeStyle="rgba("+P._private.style["border-color"].value[0]+","+P._private.style["border-color"].value[1]+","+P._private.style["border-color"].value[2]+","+(P._private.style["border-opacity"].value*P._private.style.opacity.value*Z)+")";var L=P._private.style["background-image"].value[2]||P._private.style["background-image"].value[1];if(L!=undefined){var K=this;var Q=this.getCachedImage(L,function(){K.data.canvasNeedsRedraw[J]=true;K.data.canvasRedrawReason[J].push("image finished load");K.data.canvasNeedsRedraw[d]=true;
K.data.canvasRedrawReason[d].push("image finished load");K.swapCachedImage(L);K.redraw()});if(Q.complete==false){s[K.getNodeShape(P)].drawPath(N,P._private.position.x,P._private.position.y,X,M);N.stroke();N.fillStyle="#555555";N.fill()}else{this.drawInscribedImage(N,Q,P)}}else{s[this.getNodeShape(P)].draw(N,P._private.position.x,P._private.position.y,X,M)}N.lineWidth=P._private.style["border-width"].pxValue;if(P._private.style["border-width"].value>0){N.stroke()}}else{var Y=P._private.style["overlay-padding"].value;
var T=P._private.style["overlay-opacity"].value;var U=P._private.style["overlay-color"].value;if(T>0){N.fillStyle="rgba( "+U[0]+", "+U[1]+", "+U[2]+", "+T+" )";s[this.getNodeShape(P)].draw(N,P._private.position.x,P._private.position.y,X+Y*2,M+Y*2)}}};B.prototype.drawInscribedImage=function(L,Q,O){var i=this;var S=this.data.cy._private.zoom;var N=O._private.position.x;var M=O._private.position.y;var R=this.getNodeWidth(O);var K=this.getNodeHeight(O);L.save();s[i.getNodeShape(O)].drawPath(L,N,M,R,K);
L.clip();var P=[Q.width,Q.height];L.drawImage(Q,N-P[0]/2,M-P[1]/2,P[0],P[1]);L.restore();L.stroke()};B.prototype.drawNodeText=function(L,M){if(M._private.style.visibility.value!="visible"){return}var P=M._private.style["font-size"].pxValue*M.cy().zoom();var i=M._private.style["min-zoomed-font-size"].pxValue;if(P<i){return}var Q,O;var S=this.getNodeWidth(M);var K=this.getNodeHeight(M);var N=M._private.style["text-halign"].strValue;if(N=="left"){L.textAlign="right";Q=M._private.position.x-S/2}else{if(N=="right"){L.textAlign="left";
Q=M._private.position.x+S/2}else{if(N=="center"){L.textAlign="center";Q=M._private.position.x}else{L.textAlign="center";Q=M._private.position.x}}}var R=M._private.style["text-valign"].strValue;if(R=="top"){L.textBaseline="bottom";O=M._private.position.y-K/2}else{if(R=="bottom"){L.textBaseline="top";O=M._private.position.y+K/2}else{if(R=="middle"||R=="center"){L.textBaseline="middle";O=M._private.position.y}else{L.textBaseline="middle";O=M._private.position.y}}}this.drawText(L,M,Q,O)};B.prototype.drawText=function(K,O,R,Q){var aa=1;
var W=O.parents();for(var P=0;P<W.length;P++){var X=W[P];var U=X._private.style.opacity.value;aa=U*aa;if(U===0){return}}var V=O._private.style["font-style"].strValue;var N=O._private.style["font-size"].value+"px";var Z=O._private.style["font-family"].strValue;var T=O._private.style["font-variant"].strValue;var L=O._private.style["font-weight"].strValue;K.font=V+" "+L+" "+N+" "+Z;var Y=String(O._private.style.content.value);var M=O._private.style["text-transform"].value;if(M=="none"){}else{if(M=="uppercase"){Y=Y.toUpperCase()
}else{if(M=="lowercase"){Y=Y.toLowerCase()}}}K.lineJoin="round";K.fillStyle="rgba("+O._private.style.color.value[0]+","+O._private.style.color.value[1]+","+O._private.style.color.value[2]+","+(O._private.style["text-opacity"].value*O._private.style.opacity.value*aa)+")";K.strokeStyle="rgba("+O._private.style["text-outline-color"].value[0]+","+O._private.style["text-outline-color"].value[1]+","+O._private.style["text-outline-color"].value[2]+","+(O._private.style["text-opacity"].value*O._private.style.opacity.value*aa)+")";
if(Y!=undefined){var S=2*O._private.style["text-outline-width"].value;if(S>0){K.lineWidth=S;K.strokeText(Y,R,Q)}if(isNaN(R)){R=0}if(isNaN(Q)){Q=0}K.fillText(""+Y,R,Q);O._private.rstyle.labelWidth=K.measureText(Y).width}};B.prototype.drawBackground=function(L,K,i,M,N){};B.prototype.findEdgeControlPoints=function(ac){var K={};var af=this.data.cy;var P=[];var Y;for(var au=0;au<ac.length;au++){Y=ac[au]._private.data.source>ac[au]._private.data.target?ac[au]._private.data.target+"-"+ac[au]._private.data.source:ac[au]._private.data.source+"-"+ac[au]._private.data.target;
if(K[Y]==undefined){K[Y]=[]}K[Y].push(ac[au]);P.push(Y)}var ag,am;for(var ao=0;ao<P.length;ao++){Y=P[ao];ag=af.getElementById(K[Y][0]._private.data.source);am=af.getElementById(K[Y][0]._private.data.target);var ae=(ag._private.position.x+am._private.position.x)/2;var ad=(ag._private.position.y+am._private.position.y)/2;var X,W;if(K[Y].length>1){X=am._private.position.y-ag._private.position.y;W=ag._private.position.x-am._private.position.x;var V=Math.sqrt(X*X+W*W);X/=V;W/=V}var U;for(var au=0;au<K[Y].length;
au++){U=K[Y][au];var R=U._private.rscratch.lastEdgeIndex;var Q=au;var M=U._private.rscratch.lastNumEdges;var L=K[Y].length;var al=U._private.rscratch.lastSrcCtlPtX;var ak=ag._private.position.x;var ab=U._private.rscratch.lastSrcCtlPtY;var aa=ag._private.position.y;var aw=U._private.rscratch.lastSrcCtlPtW;var av=ag.outerWidth();var aq=U._private.rscratch.lastSrcCtlPtH;var ap=ag.outerHeight();var at=U._private.rscratch.lastTgtCtlPtX;var ar=am._private.position.x;var ai=U._private.rscratch.lastTgtCtlPtY;
var ah=am._private.position.y;var T=U._private.rscratch.lastTgtCtlPtW;var S=am.outerWidth();var O=U._private.rscratch.lastTgtCtlPtH;var N=am.outerHeight();if(al===ak&&ab===aa&&aw===av&&aq===ap&&at===ar&&ai===ah&&T===S&&O===N&&R===Q&&M===L){continue}else{var aj=U._private.rscratch;aj.lastSrcCtlPtX=ak;aj.lastSrcCtlPtY=aa;aj.lastSrcCtlPtW=av;aj.lastSrcCtlPtH=ap;aj.lastTgtCtlPtX=ar;aj.lastTgtCtlPtY=ah;aj.lastTgtCtlPtW=S;aj.lastTgtCtlPtH=N;aj.lastEdgeIndex=Q;aj.lastNumEdges=L}if(ag._private.data.id==am._private.data.id){var an=U._private.style["control-point-step-size"].pxValue;
U._private.rscratch.edgeType="self";U._private.rscratch.cp2ax=ag._private.position.x;U._private.rscratch.cp2ay=ag._private.position.y-(1+Math.pow(this.getNodeHeight(ag),1.12)/100)*an*(au/3+1);U._private.rscratch.cp2cx=ag._private.position.x-(1+Math.pow(this.getNodeWidth(ag),1.12)/100)*an*(au/3+1);U._private.rscratch.cp2cy=ag._private.position.y;U._private.rscratch.selfEdgeMidX=(U._private.rscratch.cp2ax+U._private.rscratch.cp2cx)/2;U._private.rscratch.selfEdgeMidY=(U._private.rscratch.cp2ay+U._private.rscratch.cp2cy)/2
}else{if(K[Y].length%2==1&&au==Math.floor(K[Y].length/2)){U._private.rscratch.edgeType="straight"}else{var an=U._private.style["control-point-step-size"].value;var Z=(0.5-K[Y].length/2+au)*an;U._private.rscratch.edgeType="bezier";U._private.rscratch.cp2x=ae+X*Z;U._private.rscratch.cp2y=ad+W*Z}}}}return K};B.prototype.findEndpoints=function(M){var O;var i=M.source()[0];var S=M.target()[0];var X=Math.max(this.getNodeWidth(i),this.getNodeHeight(i));var N=Math.max(this.getNodeWidth(S),this.getNodeHeight(S));
X=0;N/=2;var L=[M.source().position().x,M.source().position().y];var P=[M.target().position().x,M.target().position().y];if(M._private.rscratch.edgeType=="self"){var U=[M._private.rscratch.cp2cx,M._private.rscratch.cp2cy];O=s[this.getNodeShape(S)].intersectLine(S._private.position.x,S._private.position.y,this.getNodeWidth(S),this.getNodeHeight(S),U[0],U[1],S._private.style["border-width"].value/2);var K=this.shortenIntersection(O,U,b[M._private.style["target-arrow-shape"].value].spacing(M));var T=this.shortenIntersection(O,U,b[M._private.style["target-arrow-shape"].value].gap(M));
M._private.rscratch.endX=T[0];M._private.rscratch.endY=T[1];M._private.rscratch.arrowEndX=K[0];M._private.rscratch.arrowEndY=K[1];var U=[M._private.rscratch.cp2ax,M._private.rscratch.cp2ay];O=s[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),U[0],U[1],i._private.style["border-width"].value/2);var Q=this.shortenIntersection(O,U,b[M._private.style["source-arrow-shape"].value].spacing(M));var R=this.shortenIntersection(O,U,b[M._private.style["source-arrow-shape"].value].gap(M));
M._private.rscratch.startX=R[0];M._private.rscratch.startY=R[1];M._private.rscratch.arrowStartX=Q[0];M._private.rscratch.arrowStartY=Q[1]}else{if(M._private.rscratch.edgeType=="straight"){O=s[this.getNodeShape(S)].intersectLine(S._private.position.x,S._private.position.y,this.getNodeWidth(S),this.getNodeHeight(S),i.position().x,i.position().y,S._private.style["border-width"].value/2);if(O.length==0){M._private.rscratch.noArrowPlacement=true}else{M._private.rscratch.noArrowPlacement=false}var K=this.shortenIntersection(O,[i.position().x,i.position().y],b[M._private.style["target-arrow-shape"].value].spacing(M));
var T=this.shortenIntersection(O,[i.position().x,i.position().y],b[M._private.style["target-arrow-shape"].value].gap(M));M._private.rscratch.endX=T[0];M._private.rscratch.endY=T[1];M._private.rscratch.arrowEndX=K[0];M._private.rscratch.arrowEndY=K[1];O=s[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),S.position().x,S.position().y,i._private.style["border-width"].value/2);if(O.length==0){M._private.rscratch.noArrowPlacement=true
}else{M._private.rscratch.noArrowPlacement=false}var Q=this.shortenIntersection(O,[S.position().x,S.position().y],b[M._private.style["source-arrow-shape"].value].spacing(M));var R=this.shortenIntersection(O,[S.position().x,S.position().y],b[M._private.style["source-arrow-shape"].value].gap(M));M._private.rscratch.startX=R[0];M._private.rscratch.startY=R[1];M._private.rscratch.arrowStartX=Q[0];M._private.rscratch.arrowStartY=Q[1]}else{if(M._private.rscratch.edgeType=="bezier"){var U=[M._private.rscratch.cp2x,M._private.rscratch.cp2y];
var W=L[0]*0.25+P[0]*0.25+U[0]*0.5;var V=L[1]*0.25+P[1]*0.25+U[1]*0.5;O=s[this.getNodeShape(S)].intersectLine(S._private.position.x,S._private.position.y,this.getNodeWidth(S),this.getNodeHeight(S),U[0],U[1],S._private.style["border-width"].value/2);var K=this.shortenIntersection(O,U,b[M._private.style["target-arrow-shape"].value].spacing(M));var T=this.shortenIntersection(O,U,b[M._private.style["target-arrow-shape"].value].gap(M));M._private.rscratch.endX=T[0];M._private.rscratch.endY=T[1];M._private.rscratch.arrowEndX=K[0];
M._private.rscratch.arrowEndY=K[1];O=s[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),U[0],U[1],i._private.style["border-width"].value/2);var Q=this.shortenIntersection(O,U,b[M._private.style["source-arrow-shape"].value].spacing(M));var R=this.shortenIntersection(O,U,b[M._private.style["source-arrow-shape"].value].gap(M));M._private.rscratch.startX=R[0];M._private.rscratch.startY=R[1];M._private.rscratch.arrowStartX=Q[0];
M._private.rscratch.arrowStartY=Q[1]}else{if(M._private.rscratch.isArcEdge){return}}}}};B.prototype.findEdges=function(O){var L=this.getCachedEdges();var N={};var K=[];for(var M=0;M<O.length;M++){N[O[M]._private.data.id]=O[M]}for(var M=0;M<L.length;M++){if(N[L[M]._private.data.source]||N[L[M]._private.data.target]){K.push(L[M])}}return K};B.prototype.intersectLineEllipse=function(T,S,P,O,M,K){var L=P-T;var i=O-S;L/=M;i/=K;var Q=Math.sqrt(L*L+i*i);var N=Q-1;if(N<0){return[]}var R=N/Q;return[(P-T)*R+T,(O-S)*R+S]
};B.prototype.findCircleNearPoint=function(N,M,O,S,R){var K=S-N;var i=R-M;var L=Math.sqrt(K*K+i*i);var Q=K/L;var P=i/L;return[N+Q*O,M+P*O]};B.prototype.findMaxSqDistanceToOrigin=function(N){var K=0.000001;var M;for(var L=0;L<N.length/2;L++){M=N[L*2]*N[L*2]+N[L*2+1]*N[L*2+1];if(M>K){K=M}}return K};B.prototype.finiteLinesIntersect=function(O,V,M,T,K,S,W,Q,U){var P=(W-K)*(V-S)-(Q-S)*(O-K);var R=(M-O)*(V-S)-(T-V)*(O-K);var N=(Q-S)*(M-O)-(W-K)*(T-V);if(N!=0){var L=P/N;var i=R/N;if(0<=L&&L<=1&&0<=i&&i<=1){return[O+L*(M-O),V+L*(T-V)]
}else{if(!U){return[]}else{return[O+L*(M-O),V+L*(T-V)]}}}else{if(P==0||R==0){if([O,M,W].sort()[1]==W){return[W,Q]}if([O,M,K].sort()[1]==K){return[K,S]}if([K,W,M].sort()[1]==M){return[M,T]}return[]}else{return[]}}};B.prototype.boxIntersectEllipse=function(L,U,i,S,T,K,X,P,N){if(i<L){var M=L;L=i;i=M}if(S<U){var V=U;U=S;S=V}var W=[P-K/2-T,N];var R=[P+K/2+T,N];var O=[P,N-X/2-T];var Q=[P,N+X/2+T];if(i<W[0]){return false}if(L>R[0]){return false}if(U>Q[1]){return false}if(S<O[1]){return false}if(L<=R[0]&&R[0]<=i&&U<=R[1]&&R[1]<=S){return true
}if(L<=W[0]&&W[0]<=i&&U<=W[1]&&W[1]<=S){return true}if(L<=O[0]&&O[0]<=i&&U<=O[1]&&O[1]<=S){return true}if(L<=Q[0]&&Q[0]<=i&&U<=Q[1]&&Q[1]<=S){return true}L=(L-P)/(K/2+T);i=(i-P)/(K/2+T);U=(U-N)/(X/2+T);S=(S-N)/(X/2+T);if(L*L+U*U<=1){return true}if(i*i+U*U<=1){return true}if(i*i+S*S<=1){return true}if(L*L+S*S<=1){return true}return false};B.prototype.boxIntersectPolygon=function(ag,Q,ae,N,S,Z,Y,W,U,ak,X){if(ae<ag){var af=ag;ag=ae;ae=af}if(N<Q){var P=Q;Q=N;N=P}var V=new Array(S.length);var ah=Math.asin(ak[1]/(Math.sqrt(ak[0]*ak[0]+ak[1]*ak[1])));
if(ak[0]<0){ah=ah+Math.PI/2}else{ah=-ah-Math.PI/2}var L=Math.cos(-ah);var K=Math.sin(-ah);for(var ad=0;ad<V.length/2;ad++){V[ad*2]=Z/2*(S[ad*2]*L-S[ad*2+1]*K);V[ad*2+1]=Y/2*(S[ad*2+1]*L+S[ad*2]*K);V[ad*2]+=W;V[ad*2+1]+=U}var O=V[0];var T=V[0];var M=V[1];var R=V[1];for(var ad=1;ad<V.length/2;ad++){if(V[ad*2]>T){T=V[ad*2]}if(V[ad*2]<O){O=V[ad*2]}if(V[ad*2+1]>R){R=V[ad*2+1]}if(V[ad*2+1]<M){M=V[ad*2+1]}}if(ae<O-X){return false}if(ag>T+X){return false}if(N<M-X){return false}if(Q>R+X){return false}var ac;
if(X>0){var al=D.expandPolygon(V,-X);ac=D.joinLines(al)}else{ac=V}for(var ad=0;ad<V.length/2;ad++){if(ag<=V[ad*2]&&V[ad*2]<=ae){if(Q<=V[ad*2+1]&&V[ad*2+1]<=N){return true}}}for(var ad=0;ad<ac.length/2;ad++){var ab=ac[ad*2];var aa=ac[ad*2+1];var aj;var ai;if(ad<ac.length/2-1){aj=ac[(ad+1)*2];ai=ac[(ad+1)*2+1]}else{aj=ac[0];ai=ac[1]}if(D.finiteLinesIntersect(ab,aa,aj,ai,ag,Q,ae,Q,false).length>0){return true}if(D.finiteLinesIntersect(ab,aa,aj,ai,ag,N,ae,N,false).length>0){return true}if(D.finiteLinesIntersect(ab,aa,aj,ai,ag,Q,ag,N,false).length>0){return true
}if(D.finiteLinesIntersect(ab,aa,aj,ai,ae,Q,ae,N,false).length>0){return true}}return false};B.prototype.polygonIntersectLine=function(Q,P,K,N,L,T,S,R){var ab=[];var O;var M=new Array(K.length);for(var X=0;X<M.length/2;X++){M[X*2]=K[X*2]*T+N;M[X*2+1]=K[X*2+1]*S+L}var W;if(R>0){var aa=D.expandPolygon(M,-R);W=D.joinLines(aa)}else{W=M}var V,U,Z,Y;for(var X=0;X<W.length/2;X++){V=W[X*2];U=W[X*2+1];if(X<W.length/2-1){Z=W[(X+1)*2];Y=W[(X+1)*2+1]}else{Z=W[0];Y=W[1]}O=this.finiteLinesIntersect(Q,P,N,L,V,U,Z,Y);
if(O.length!=0){ab.push(O[0],O[1])}}return ab};B.prototype.shortenIntersection=function(O,N,L){var i=[O[0]-N[0],O[1]-N[1]];var M=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var K=(M-L)/M;if(K<0){return[]}else{return[N[0]+K*i[0],N[1]+K*i[1]]}};b.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(P,M,L,K,i,R,N,O){var Q=b.arrow._points;return c.pointInsidePolygon(P,M,Q,L,K,i,R,N,O)},roughCollide:function(K,Q,P,M,L,i,O,N){if(typeof(b.arrow._farthestPointSqDistance)=="undefined"){b.arrow._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.arrow._points)
}return c.checkInBoundingCircle(K,Q,b.arrow._farthestPointSqDistance,0,L,i,P,M)},draw:function(L){var M=b.arrow._points;for(var K=0;K<M.length/2;K++){L.lineTo(M[K*2],M[K*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.triangle=b.arrow;b.none={collide:function(K,Q,P,M,L,i,O,N){return false},roughCollide:function(K,Q,P,M,L,i,O,N){return false},draw:function(i){},spacing:function(i){return 0},gap:function(i){return 0}};b.circle={_baseRadius:0.15,collide:function(S,P,M,L,i,V,Q,R){if(i!=V){var K=Math.asin(Q[1]/(Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1])));
var U=Math.cos(-K);var O=Math.sin(-K);var N=[S*U-P*O,P*U+S*O];var T=(V+R)/(i+R);P/=T;L/=T;return(Math.pow(M-S,2)+Math.pow(L-P,2)<=Math.pow((i+R)*b.circle._baseRadius,2))}else{return(Math.pow(M-S,2)+Math.pow(L-P,2)<=Math.pow((i+R)*b.circle._baseRadius,2))}},roughCollide:function(K,Q,P,M,L,i,O,N){return true},draw:function(i){i.arc(0,0,b.circle._baseRadius,0,Math.PI*2,false)},spacing:function(i){return c.getArrowWidth(i._private.style.width.value)*b.circle._baseRadius},gap:function(i){return i._private.style.width.value*2
}};b.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(P,M,L,K,i,R,N,O){var Q=b.inhibitor._points;return c.pointInsidePolygon(P,M,Q,L,K,i,R,N,O)},roughCollide:function(K,Q,P,M,L,i,O,N){if(typeof(b.inhibitor._farthestPointSqDistance)=="undefined"){b.inhibitor._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.inhibitor._points)}return c.checkInBoundingCircle(K,Q,b.inhibitor._farthestPointSqDistance,0,L,i,P,M)},draw:function(L){var M=b.inhibitor._points;for(var K=0;K<M.length/2;
K++){L.lineTo(M[K*2],M[K*2+1])}},spacing:function(i){return 4},gap:function(i){return 4}};b.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(P,M,L,K,i,R,N,O){var Q=b.square._points;return c.pointInsidePolygon(P,M,Q,L,K,i,R,N,O)},roughCollide:function(K,Q,P,M,L,i,O,N){if(typeof(b.square._farthestPointSqDistance)=="undefined"){b.square._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.square._points)}return c.checkInBoundingCircle(K,Q,b.square._farthestPointSqDistance,0,L,i,P,M)
},draw:function(L){var M=b.square._points;for(var K=0;K<M.length/2;K++){L.lineTo(M[K*2],M[K*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(P,M,L,K,i,R,N,O){var Q=b.diamond._points;return c.pointInsidePolygon(P,M,Q,L,K,i,R,N,O)},roughCollide:function(K,Q,P,M,L,i,O,N){if(typeof(b.diamond._farthestPointSqDistance)=="undefined"){b.diamond._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.diamond._points)
}return c.checkInBoundingCircle(K,Q,b.diamond._farthestPointSqDistance,0,L,i,P,M)},draw:function(i){i.lineTo(-0.14,-0.14);i.lineTo(0,-0.28);i.lineTo(0.14,-0.14);i.lineTo(0,0)},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.tee=b.inhibitor;B.prototype.getArrowWidth=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};B.prototype.getArrowHeight=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};B.prototype.drawArrowheads=function(K,M,N){if(N){return}var L,i;
var P=M._private.rscratch.arrowStartX;var O=M._private.rscratch.arrowStartY;L=P-M.source().position().x;i=O-M.source().position().y;K.fillStyle="rgba("+M._private.style["source-arrow-color"].value[0]+","+M._private.style["source-arrow-color"].value[1]+","+M._private.style["source-arrow-color"].value[2]+","+M._private.style.opacity.value+")";K.lineWidth=M._private.style.width.value;this.drawArrowShape(K,M._private.style["source-arrow-shape"].value,P,O,L,i);var R=M._private.rscratch.arrowEndX;var Q=M._private.rscratch.arrowEndY;
L=R-M.target().position().x;i=Q-M.target().position().y;K.fillStyle="rgba("+M._private.style["target-arrow-color"].value[0]+","+M._private.style["target-arrow-color"].value[1]+","+M._private.style["target-arrow-color"].value[2]+","+M._private.style.opacity.value+")";K.lineWidth=M._private.style.width.value;this.drawArrowShape(K,M._private.style["target-arrow-shape"].value,R,Q,L,i)};B.prototype.drawArrowShape=function(O,K,i,Q,N,L){var P=Math.asin(L/(Math.sqrt(N*N+L*L)));if(N<0){P=P+Math.PI/2}else{P=-(Math.PI/2+P)
}O.translate(i,Q);O.moveTo(0,0);O.rotate(-P);var M=this.getArrowWidth(O.lineWidth);O.scale(M,M);O.beginPath();b[K].draw(O);O.closePath();O.fill();O.scale(1/M,1/M);O.rotate(P);O.translate(-i,-Q)};var l=function(L,K){var Q=1/L*2*Math.PI;var O=L%2==0?Math.PI/2+Q/2:Math.PI/2;O+=K;var S=new Array(L*2);var M;for(var N=0;N<L;N++){M=N*Q+O;S[2*N]=Math.cos(M);S[2*N+1]=Math.sin(-M)}var U=0;var T=0;for(var N=0;N<S.length/2;N++){if(Math.abs(S[2*N]>U)){U=Math.abs(S[2*N])}if(Math.abs(S[2*N+1]>T)){T=Math.abs(S[2*N+1])
}}var P=0.0005;var R=Math.max(U,T);for(var N=0;N<S.length/2;N++){if(R>P){S[2*N]*=(1/R);S[2*N+1]*=(1/R)}}return S};var D=c;s.ellipse={draw:function(K,N,M,L,i){s.ellipse.drawPath(K,N,M,L,i);K.fill()},drawPath:function(K,N,M,L,i){K.beginPath();K.translate(N,M);K.scale(L/2,i/2);K.arc(0,0,1,0,Math.PI*2*0.999,false);K.closePath();K.scale(2/L,2/i);K.translate(-N,-M)},intersectLine:function(O,N,M,L,K,Q,P){var i=c.intersectLineEllipse(K,Q,O,N,M/2+P,L/2+P);return i},intersectBox:function(L,Q,i,O,K,R,N,M,P){return B.prototype.boxIntersectEllipse(L,Q,i,O,P,K,R,N,M)
},checkPointRough:function(K,P,O,L,i,N,M){return true},checkPoint:function(K,P,O,L,i,N,M){K-=N;P-=M;K/=(L+O);P/=(i+O);return(Math.pow(K,2)+Math.pow(P,2)<=1)}};s.triangle={points:l(3,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.triangle.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.triangle.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.triangle.points,N,M,L/2,K/2,O)},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.triangle.points;
return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.triangle.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.triangle.points,N,M,L,i,[0,-1],O)}};s.square={points:l(4,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.square.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.square.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.square.points,N,M,L/2,K/2,O)
},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.square.points;return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.square.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.square.points,N,M,L,i,[0,-1],O)}};s.rectangle=s.square;s.octogon={};s.roundrectangle=s.square;s.roundrectangle2={roundness:4.99,draw:function(L,K,i){if(K<=roundness*2){return}D.drawPolygon(L._private.position.x,L._private.position.y,K,i,nodeSapes.roundrectangle2.points)
},intersectLine:function(M,L,K,i,N){return D.findPolygonIntersection(M,L,K,i,N,s.square.points)},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.square.points}};s.pentagon={points:l(5,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.pentagon.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.pentagon.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.pentagon.points,N,M,L/2,K/2,O)},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.pentagon.points;
return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.pentagon.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.pentagon.points,N,M,L,i,[0,-1],O)}};s.hexagon={points:l(6,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.hexagon.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.hexagon.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.hexagon.points,N,M,L/2,K/2,O)
},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.hexagon.points;return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.hexagon.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.hexagon.points,N,M,L,i,[0,-1],O)}};s.heptagon={points:l(7,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.heptagon.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.heptagon.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.heptagon.points,N,M,L/2,K/2,O)
},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.heptagon.points;return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.heptagon.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.heptagon.points,N,M,L,i,[0,-1],O)}};s.octagon={points:l(8,0),draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.octagon.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.octagon.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.octagon.points,N,M,L/2,K/2,O)
},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.octagon.points;return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.octagon.points,O,L,i,N,M)},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.octagon.points,N,M,L,i,[0,-1],O)}};var k=new Array(20);var h=l(5,0);var I=l(5,Math.PI/5);var p=0.5*(3-Math.sqrt(5));p*=1.57;for(var H=0;H<I.length/2;H++){I[H*2]*=p;I[H*2+1]*=p}for(var H=0;H<20/4;H++){k[H*4]=h[H*2];
k[H*4+1]=h[H*2+1];k[H*4+2]=I[H*2];k[H*4+3]=I[H*2+1]}s.star5={points:k,draw:function(K,N,M,L,i){D.drawPolygon(K,N,M,L,i,s.star5.points)},drawPath:function(K,N,M,L,i){D.drawPolygonPath(K,N,M,L,i,s.star5.points)},intersectLine:function(N,M,L,K,i,P,O){return D.polygonIntersectLine(i,P,s.star5.points,N,M,L/2,K/2,O)},intersectBox:function(L,Q,i,O,K,S,N,M,P){var R=s.star5.points;return D.boxIntersectPolygon(L,Q,i,O,R,K,S,N,M,[0,-1],P)},checkPointRough:function(K,P,O,L,i,N,M){return D.checkInBoundingBox(K,P,s.star5.points,O,L,i,N,M)
},checkPoint:function(K,P,O,L,i,N,M){return D.pointInsidePolygon(K,P,s.star5.points,N,M,L,i,[0,-1],O)}};B.prototype.expandPolygon=function(W,M){var N=new Array(W.length*2);var V,U,T,S;for(var Q=0;Q<W.length/2;Q++){V=W[Q*2];U=W[Q*2+1];if(Q<W.length/2-1){T=W[(Q+1)*2];S=W[(Q+1)*2+1]}else{T=W[0];S=W[1]}var R=(S-U);var P=-(T-V);var O=Math.sqrt(R*R+P*P);var L=R/O;var K=P/O;N[Q*4]=V+L*M;N[Q*4+1]=U+K*M;N[Q*4+2]=T+L*M;N[Q*4+3]=S+K*M}return N};B.prototype.joinLines=function(T){var S=new Array(T.length/2);var V,U,R,Q;
var O,N,M,L;for(var P=0;P<T.length/4;P++){V=T[P*4];U=T[P*4+1];R=T[P*4+2];Q=T[P*4+3];if(P<T.length/4-1){O=T[(P+1)*4];N=T[(P+1)*4+1];M=T[(P+1)*4+2];L=T[(P+1)*4+3]}else{O=T[0];N=T[1];M=T[2];L=T[3]}var K=this.finiteLinesIntersect(V,U,R,Q,O,N,M,L,true);S[P*2]=K[0];S[P*2+1]=K[1]}return S};B.prototype.pointInsidePolygon=function(V,T,P,S,Q,Z,Y,af,X){var R=new Array(P.length);var ae=Math.asin(af[1]/(Math.sqrt(af[0]*af[0]+af[1]*af[1])));if(af[0]<0){ae=ae+Math.PI/2}else{ae=-ae-Math.PI/2}var M=Math.cos(-ae);
var K=Math.sin(-ae);for(var ab=0;ab<R.length/2;ab++){R[ab*2]=Z*(P[ab*2]*M-P[ab*2+1]*K);R[ab*2+1]=Y*(P[ab*2+1]*M+P[ab*2]*K);R[ab*2]+=S;R[ab*2+1]+=Q}var aa;if(X>0){var ag=D.expandPolygon(R,-X);aa=D.joinLines(ag)}else{aa=R}var ad,O,ac,N;var L;var U=0;var W=0;for(var ab=0;ab<aa.length/2;ab++){ad=aa[ab*2];O=aa[ab*2+1];if(ab+1<aa.length/2){ac=aa[(ab+1)*2];N=aa[(ab+1)*2+1]}else{ac=aa[(ab+1-aa.length/2)*2];N=aa[(ab+1-aa.length/2)*2+1]}if(ad==V&&ac==V){}else{if((ad>=V&&V>=ac)||(ad<=V&&V<=ac)){L=(V-ad)/(ac-ad)*(N-O)+O;
if(L>T){U++}if(L<T){W++}}else{continue}}}if(U%2==0){return false}else{return true}};B.prototype.drawPolygonPath=function(N,L,Q,P,K,O){N.translate(L,Q);N.scale(P/2,K/2);N.beginPath();N.moveTo(O[0],O[1]);for(var M=1;M<O.length/2;M++){N.lineTo(O[M*2],O[M*2+1])}N.closePath();N.scale(2/P,2/K);N.translate(-L,-Q)};B.prototype.drawPolygon=function(L,K,O,N,i,M){this.drawPolygonPath(L,K,O,N,i,M);L.fill()};B.prototype.checkInBoundingCircle=function(K,Q,L,P,M,i,O,N){K=(K-O)/(M+P);Q=(Q-N)/(i+P);return(K*K+Q*Q)<=L
};B.prototype.checkInBoundingBox=function(U,S,V,T,M,W,Q,P){var O=V[0],N=V[1];var L=V[0],K=V[1];for(var R=1;R<V.length/2;R++){if(V[R*2]<O){O=V[R*2]}else{if(V[R*2]>L){L=V[R*2]}}if(V[R*2+1]<N){N=V[R*2+1]}else{if(V[R*2+1]>K){K=V[R*2+1]}}}U-=Q;S-=P;U/=M;S/=W;if(U<O){return false}else{if(U>L){return false}}if(S<N){return false}else{if(S>K){return false}}return true};B.prototype.boxInBezierVicinity=function(W,Q,ac,T,Y,P,X,O,U,M,V){var S=0.25*Y+0.5*X+0.25*U;var R=0.25*P+0.5*O+0.25*M;var ad=Math.min(W,ac)-V;
var aa=Math.min(Q,T)-V;var ab=Math.max(W,ac)+V;var Z=Math.max(Q,T)+V;if(Y>=ad&&Y<=ab&&P>=aa&&P<=Z){return 1}else{if(U>=ad&&U<=ab&&M>=aa&&M<=Z){return 1}else{if(S>=ad&&S<=ab&&R>=aa&&R<=Z){return 1}else{if(X>=ad&&X<=ab&&O>=aa&&O<=Z){return 1}}}}var N=Math.min(Y,S,U);var L=Math.min(P,R,M);var K=Math.max(Y,S,U);var i=Math.max(P,R,M);if(N>ab||K<ad||L>Z||i<aa){return 0}return 1};B.prototype.checkBezierInBox=function(O,N,W,T,M,S,L,R,i,Q,P){function K(aa,Z,Y,X){return(1-X)*(1-X)*aa+2*(1-X)*X*Z+X*X*Y}function V(Y){var X=K(M,L,i,Y);
var Z=K(S,R,Q,Y);return O<=X&&X<=W&&N<=Z&&Z<=T}for(var U=0;U<=1;U+=0.25){if(!V(U)){return false}}return true};B.prototype.checkStraightEdgeInBox=function(M,L,R,Q,K,P,i,O,N){return M<=K&&K<=R&&M<=i&&i<=R&&L<=P&&P<=Q&&L<=O&&O<=Q};B.prototype.checkStraightEdgeCrossesBox=function(X,R,ae,U,Z,N,Y,K,W){var af=Math.min(X,ae)-W;var ac=Math.min(R,U)-W;var ad=Math.max(X,ae)+W;var ab=Math.max(R,U)+W;var O=Y-Z;var T=Z;var aa;var L=K-N;var S=N;var V;if(Math.abs(O)<0.0001){return(Z>=af&&Z<=ad&&Math.min(N,K)<=ac&&Math.max(N,K)>=ab)
}var i=(af-T)/O;if(i>0&&i<=1){aa=L*i+S;if(aa>=ac&&aa<=ab){return true}}var Q=(ad-T)/O;if(Q>0&&Q<=1){aa=L*Q+S;if(aa>=ac&&aa<=ab){return true}}var M=(ac-S)/L;if(M>0&&M<=1){V=O*M+T;if(V>=af&&V<=ad){return true}}var P=(ab-S)/L;if(P>0&&P<=1){V=O*P+T;if(V>=af&&V<=ad){return true}}return false};B.prototype.checkBezierCrossesBox=function(ac,O,ap,ae,W,az,S,aw,Q,at,K){var Y=Math.min(ac,ap)-K;var V=Math.min(O,ae)-K;var ay=Math.max(ac,ap)+K;var av=Math.max(O,ae)+K;if(W>=Y&&W<=ay&&az>=V&&az<=av){return true}else{if(Q>=Y&&Q<=ay&&at>=V&&at<=av){return true
}}var ab=W-2*S+Q;var N=-2*W+2*S;var al=W;var af=[];if(Math.abs(ab)<0.0001){var aq=(Y-W)/N;var ad=(ay-W)/N;af.push(aq,ad)}else{var ai=N*N-4*ab*(al-Y);var Z,X;if(ai>0){var aj=Math.sqrt(ai);Z=(-N+aj)/(2*ab);X=(-N-aj)/(2*ab);af.push(Z,X)}var ah=N*N-4*ab*(al-ay);var U,R;if(ah>0){var aj=Math.sqrt(ah);U=(-N+aj)/(2*ab);R=(-N-aj)/(2*ab);af.push(U,R)}}af.sort(function(aB,aA){return aB-aA});var aa=az-2*aw+at;var L=-2*az+2*aw;var ak=az;var ao=[];if(Math.abs(aa)<0.0001){var M=(V-az)/L;var am=(av-az)/L;ao.push(M,am)
}else{var T=L*L-4*aa*(ak-V);var i,ax;if(T>0){var aj=Math.sqrt(T);i=(-L+aj)/(2*aa);ax=(-L-aj)/(2*aa);ao.push(i,ax)}var P=L*L-4*aa*(ak-av);var au,ar;if(P>0){var aj=Math.sqrt(P);au=(-L+aj)/(2*aa);ar=(-L-aj)/(2*aa);ao.push(au,ar)}}ao.sort(function(aB,aA){return aB-aA});for(var ag=0;ag<af.length;ag+=2){for(var an=1;an<ao.length;an+=2){if(af[ag]<ao[an]&&ao[an]>=0&&af[ag]<=1&&af[ag+1]>ao[an-1]&&ao[an-1]<=1&&af[ag+1]>=0){return true}}}return false};B.prototype.inLineVicinity=function(T,R,O,M,N,L,P){var U=P;
var K=Math.min(O,N);var i=Math.max(O,N);var S=Math.min(M,L);var Q=Math.max(M,L);return K-U<=T&&T<=i+U&&S-U<=R&&R<=Q+U};B.prototype.inBezierVicinity=function(Q,P,aa,L,Z,K,Y,i,af){var S=0.25*aa+0.5*Z+0.25*Y;var R=0.25*L+0.5*K+0.25*i;var N={x1:Math.min(aa,Y,S),x2:Math.max(aa,Y,S),y1:Math.min(L,i,R),y2:Math.max(L,i,R)};if(Q<N.x1||Q>N.x2||P<N.y1||P>N.y2){return false}else{}var V,U,ad,ab;var O,M,T;var ae=function(ah,an,ai,ag,am,al,aj,ak){O=(al-ag)*(ah-ai)+(ai-am)*(an-ag);M=O*O;sideSquared=(al-ag)*(al-ag)+(ai-am)*(ai-am);
if(ak){if(O>0){return false}}else{if(O<0){return false}}return(M/sideSquared>aj)};var X=(S+Z)/2;var W=(R+K)/2;var ac=true;if(ae(X,W,aa,L,Z,K,0,ac)){ac=!ac}return(!ae(Q,P,aa,L,Z,K,af,ac)&&!ae(Q,P,Z,K,Y,i,af,ac)&&!ae(Q,P,Y,i,aa,L,af,ac))};B.prototype.solveCubic=function(R,Q,P,O,V){Q/=R;P/=R;O/=R;var T,K,i,M,U,S,L,N;K=(3*P-(Q*Q))/9;i=-(27*O)+Q*(9*P-2*(Q*Q));i/=54;T=K*K*K+i*i;V[1]=0;L=(Q/3);if(T>0){U=i+Math.sqrt(T);U=((U<0)?-Math.pow(-U,(1/3)):Math.pow(U,(1/3)));S=i-Math.sqrt(T);S=((S<0)?-Math.pow(-S,(1/3)):Math.pow(S,(1/3)));
V[0]=-L+U+S;L+=(U+S)/2;V[4]=V[2]=-L;L=Math.sqrt(3)*(-S+U)/2;V[3]=L;V[5]=-L;return}V[5]=V[3]=0;if(T==0){N=((i<0)?-Math.pow(-i,(1/3)):Math.pow(i,(1/3)));V[0]=-L+2*N;V[4]=V[2]=-(N+L);return}K=-K;M=K*K*K;M=Math.acos(i/Math.sqrt(M));N=2*Math.sqrt(K);V[0]=-L+N*Math.cos(M/3);V[2]=-L+N*Math.cos((M+2*Math.PI)/3);V[4]=-L+N*Math.cos((M+4*Math.PI)/3);return};B.prototype.sqDistanceToQuadraticBezier=function(U,T,Z,O,Y,N,X,M){var af=1*Z*Z-4*Z*Y+2*Z*X+4*Y*Y-4*Y*X+X*X+O*O-4*O*N+2*O*M+4*N*N-4*N*M+M*M;var ae=1*9*Z*Y-3*Z*Z-3*Z*X-6*Y*Y+3*Y*X+9*O*N-3*O*O-3*O*M-6*N*N+3*N*M;
var ac=1*3*Z*Z-6*Z*Y+Z*X-Z*U+2*Y*Y+2*Y*U-X*U+3*O*O-6*O*N+O*M-O*T+2*N*N+2*N*T-M*T;var ab=1*Z*Y-Z*Z+Z*U-Y*U+O*N-O*O+O*T-N*T;C("coefficients: "+af/af+", "+ae/af+", "+ac/af+", "+ab/af);var P=[];this.solveCubic(af,ae,ac,ab,P);var K=1e-7;var ad=[];for(var Q=0;Q<6;Q+=2){if(Math.abs(P[Q+1])<K&&P[Q]>=0&&P[Q]<=1){ad.push(P[Q])}}ad.push(1);ad.push(0);var L=-1;var aa;var S,R,V;for(var W=0;W<ad.length;W++){S=Math.pow(1-ad[W],2)*Z+2*(1-ad[W])*ad[W]*Y+ad[W]*ad[W]*X;R=Math.pow(1-ad[W],2)*O+2*(1-ad[W])*ad[W]*N+ad[W]*ad[W]*M;
V=Math.pow(S-U,2)+Math.pow(R-T,2);C("distance for param "+ad[W]+": "+Math.sqrt(V));if(L>=0){if(V<L){L=V;aa=ad[W]}}else{L=V;aa=ad[W]}}C("given: ( "+U+", "+T+"), ( "+Z+", "+O+"), ( "+Y+", "+N+"), ( "+X+", "+M+")");C("roots: "+P);C("params: "+ad);C("closest param: "+aa);return L};B.prototype.sqDistanceToFiniteLine=function(R,O,K,Q,i,P){var L=[R-K,O-Q];var U=[i-K,P-Q];var M=U[0]*U[0]+U[1]*U[1];var T=L[0]*L[0]+L[1]*L[1];var S=L[0]*U[0]+L[1]*U[1];var N=S*S/M;if(S<0){return T}if(N>M){return(R-i)*(R-i)+(O-P)*(O-P)
}return(T-N)};var C=function(){};A("renderer","canvas",B)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);cy.trigger("layoutstop")};a("layout","null",c)
})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;var d={ready:undefined,stop:undefined,fit:true,padding:30};function c(e){this.options=a.util.extend(true,{},d,e)}c.prototype.run=function(){var i=this.options;var k=i.cy;var h=k.nodes();var g=k.edges();var f=k.container();var j=f.clientWidth*b;var e=f.clientHeight*b;h.positions(function(m,l){if(l.locked()){return false}return{x:Math.round(Math.random()*j),y:Math.round(Math.random()*e)}});k.one("layoutready",i.ready);
k.trigger("layoutready");if(i.fit){k.fit(i.padding)}k.one("layoutstop",i.stop);k.trigger("layoutstop")};c.prototype.stop=function(){};a("layout","random",c)})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;var d={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};function c(e){this.options=a.util.extend({},d,e)}c.prototype.run=function(){var B=this.options;var i=B;var h=B.cy;var w=h.nodes();var g=h.edges();var s=h.container();var v=s.clientWidth*b;
var u=s.clientHeight*b;if(u==0||v==0){w.positions(function(){return{x:0,y:0}})}else{var j=w.size();var p=Math.sqrt(j*u/v);var o=Math.round(p);var r=Math.round(v/u*p);function m(D){if(D==undefined){return Math.min(o,r)}else{var C=Math.min(o,r);if(C==o){o=D}else{r=D}}}function f(D){if(D==undefined){return Math.max(o,r)}else{var C=Math.max(o,r);if(C==o){o=D}else{r=D}}}if(i.rows!=null&&i.columns!=null){o=i.rows;r=i.columns}else{if(i.rows!=null&&i.columns==null){o=i.rows;r=Math.ceil(j/o)}else{if(i.rows==null&&i.columns!=null){r=i.columns;
o=Math.ceil(j/r)}else{if(r*o>j){var A=m();var t=f();if((A-1)*t>=j){m(A-1)}else{if((t-1)*A>=j){f(t-1)}}}else{while(r*o<j){var A=m();var t=f();if((t+1)*A>=j){f(t+1)}else{m(A+1)}}}}}}var z=v/r;var e=u/o;var l=0;var k=0;w.positions(function(E,D){if(D.locked()){return false}var C=k*z+z/2;var F=l*e+e/2;k++;if(k>=r){k=0;l++}return{x:C,y:F}})}if(B.fit){h.reset()}h.one("layoutready",B.ready);h.trigger("layoutready");h.one("layoutstop",B.stop);h.trigger("layoutstop")};c.prototype.stop=function(){};a("layout","grid",c)
})(cytoscape);(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined,padding:30};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false
}return j});if(g.pan!=null){i.pan(g.pan)}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");if(g.fit){i.fit(g.padding)}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;
var c={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(f){var g=f;return(g.max<=0.5)||(g.mean<=0.3)}};function d(e){this.options=a.util.extend({},c,e)}d.prototype.run=function(){var l=this.options;var k=l.cy;var z=k.nodes();var j=k.edges();
var s=k.container();var w=s.clientWidth*b;var u=s.clientHeight*b;if(k.nodes().size()<=1){if(l.fit){k.reset()}k.nodes().position({x:Math.round(w/2),y:Math.round(u/2)});k.one("layoutstop",l.stop);k.trigger("layoutstop");k.one("layoutstop",l.stop);k.trigger("layoutstop");return}var o=this.system=arbor.ParticleSystem(l.repulsion,l.stiffness,l.friction,l.gravity,l.fps,l.dt,l.precision);this.system=o;if(l.liveUpdate&&l.fit){k.reset()}var v=250;var h;var r=false;var g=+new Date;var t={init:function(B){},redraw:function(){var C=o.energy();
if(l.stableEnergy!=null&&C!=null&&C.n>0&&l.stableEnergy(C)){o.stop();return}clearTimeout(h);h=setTimeout(A,v);var D=[];o.eachNode(function(J,E){var I=J.name;var G=J.data;var F=G.element;if(F==null){return}var H=F._private.position;if(!F.locked()&&!F.grabbed()){H.x=E.x;H.y=E.y;D.push(F)}});var B=(+new Date-g)>=16;if(l.liveUpdate&&D.length>0&&B){new a.Collection(k,D).rtrigger("position");g=+new Date}if(!r){r=true;k.one("layoutready",l.ready);k.trigger("layoutready")}}};o.renderer=t;o.screenSize(w,u);
o.screenPadding(l.padding[0],l.padding[1],l.padding[2],l.padding[3]);o.screenStep(l.stepSize);function p(B,C){if(C==null){return undefined}else{if(typeof C==typeof function(){}){return C.apply(B,[B._private.data,{nodes:z.length,edges:j.length,element:B}])}else{return C}}}function e(F){var I=F.x;var G=F.y;var J=w;var D=u;var C=-2;var K=2;var H=-2;var B=2;var E=4;return{x:I/J*E+C,y:G/D*E+K}}var m=function(C){grabbed=this;var D=o.fromScreen(this.position());var B=arbor.Point(D.x,D.y);this.scratch().arbor.p=B;
switch(C.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};z.bind("grab drag dragstop",m);z.each(function(D,E){var G=this._private.data.id;var C=p(this,l.nodeMass);var B=this._private.locked;var F=e({x:E.position().x,y:E.position().y});if(E.locked()){return}this.scratch().arbor=o.addNode(G,{element:this,mass:C,fixed:B,x:B?F.x:undefined,y:B?F.y:undefined})});j.each(function(){var E=this.id();var C=this.source().id();
var D=this.target().id();var B=p(this,l.edgeLength);this.scratch().arbor=o.addEdge(C,D,{length:B})});function i(B){if(l.fit){k.fit()}B()}var f=z.filter(":grabbable");if(l.ungrabifyWhileSimulating){f.ungrabify()}var A=function(){if(window.isIE){i(function(){B()})}else{B()}function B(){if(!l.liveUpdate){if(l.fit){k.reset()}k.nodes().rtrigger("position")}z.unbind("grab drag dragstop",m);if(l.ungrabifyWhileSimulating){f.grabify()}k.one("layoutstop",l.stop);k.trigger("layoutstop")}};o.start();setTimeout(function(){o.stop()
},l.maxSimulationTime)};d.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",d)})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;var d={fit:true,ready:undefined,stop:undefined,rStepSize:10,padding:30,startAngle:3/2*Math.PI,counterclockwise:false};function c(e){this.options=a.util.extend({},d,e)}c.prototype.run=function(){var p=this.options;var A=p;var o=p.cy;var g=o.nodes();var s=o.edges();var h=o.container();var j=h.clientWidth*b;var z=h.clientHeight*b;
var f={x:j/2,y:z/2};var w=50;var k=A.startAngle;var u=2*Math.PI/g.length;var v=0;for(var t=0;t<g.length;t++){var m=g[t];v=Math.max(m.outerWidth(),m.outerHeight())}var e=j/2-v;function l(){var r=0;var i=u;var D={x:f.x+e*Math.cos(r),y:f.y+e*Math.sin(r)};var B={x:f.x+e*Math.cos(i),y:f.y+e*Math.sin(i)};var C=Math.sqrt((B.x-D.x)*(B.x-D.x)+(B.y-D.y)*(B.y-D.y));return C}while(l()<v){e+=A.rStepSize}var t=0;g.positions(function(){var i=this;var B=e*Math.cos(k);var r=e*Math.sin(k);var C={x:f.x+B,y:f.y+r};t++;
k=A.counterclockwise?k-u:k+u;return C});if(p.fit){o.fit(A.padding)}o.one("layoutready",p.ready);o.trigger("layoutready");o.one("layoutstop",p.stop);o.trigger("layoutstop")};c.prototype.stop=function(){};a("layout","circle",c)})(cytoscape);(function(a){var b="devicePixelRatio" in window?devicePixelRatio:1;var c={fit:true,ready:undefined,stop:undefined,directed:true,padding:30,circle:false,roots:undefined};function d(e){this.options=a.util.extend({},c,e)}d.prototype.run=function(){var P=this.options;
var o=P;var k=P.cy;var H=k.nodes();var j=k.edges();var C=k.container();var G=C.clientWidth*b;var E=C.clientHeight*b;var p;if(a.is.elementOrCollection(o.roots)){p=o.roots}else{if(a.is.array(o.roots)){var K=[];for(var L=0;L<o.roots.length;L++){var F=o.roots[L];var B=k.getElementById(F);p.push(B)}p=new a.Collection(k,K)}else{p=H.roots()}}var s=[];var m={};var r={};p.bfs(function(h,S){var w=this[0];if(!s[S]){s[S]=[]}s[S].push(w);m[w.id()]=true;r[w.id()]=S},o.directed);var O=[];for(var L=0;L<H.length;
L++){var B=H[L];if(m[B.id()]){continue}else{O.push(B)}}var g=O.length*3;var e=0;while(O.length!==0&&e<g){var J=O.shift();var I=J.neighborhood().nodes();var N=false;for(var L=0;L<I.length;L++){var R=r[I[L].id()];if(R!==undefined){s[R].push(J);N=true;break}}if(!N){O.push(J)}e++}while(O.length!==0){var J=O.shift();var t=J.bfs();var N=false;for(var L=0;L<t.length;L++){var R=r[t[L].id()];if(R!==undefined){s[R].push(J);N=true;break}}if(!N){if(s.length===0){s.push([])}s[0].push(J)}}function l(){for(var S=0;
S<s.length;S++){var h=s[S];for(var w=0;w<h.length;w++){var T=h[w];T._private.scratch.BreadthFirstLayout={depth:S,index:w}}}}l();var D=0;for(var L=0;L<H.length;L++){var A=H[L].outerWidth();var M=H[L].outerHeight();D=Math.max(D,A,M)}D*=1.75;var f={};function z(aa){if(f[aa.id()]){return f[aa.id()]}var S=aa._private.scratch.BreadthFirstLayout.depth;var Z=aa.neighborhood().nodes();var U=0;var V=0;for(var w=0;w<Z.length;w++){var X=Z[w];var W=X.edgesWith(aa);var T=X._private.scratch.BreadthFirstLayout.index;
var h=X._private.scratch.BreadthFirstLayout.depth;var Y=s[h].length;if(S>h||S===0){U+=T/Y;V++}}V=Math.max(1,V);U=U/V;if(V===0){U=undefined}f[aa.id()]=U;return U}for(var v=0;v<3;v++){for(var L=0;L<s.length;L++){var R=L;var u=[];s[L]=s[L].sort(function(i,h){var w=z(i);var S=z(h);return w-S})}l()}var Q={x:G/2,y:E/2};H.positions(function(){var X=this[0];var i=X._private.scratch.BreadthFirstLayout;var w=i.depth;var S=i.index;var W=Math.max(G/(s[w].length+1),D);var V=Math.max(E/(s.length+1),D);var U=Math.min(G/2/s.length,E/2/s.length);
U=Math.max(U,D);if(o.circle){var T=U*w+U-(s.length>0&&s[0].length<=3?U/2:0);var h=2*Math.PI/s[w].length*S;if(w===0&&s[0].length===1){T=1}return{x:Q.x+T*Math.cos(h),y:Q.y+T*Math.sin(h)}}else{return{x:(S+1)*W,y:(w+1)*V}}});if(P.fit){k.fit(o.padding)}k.one("layoutready",P.ready);k.trigger("layoutready");k.one("layoutstop",P.stop);k.trigger("layoutstop")};d.prototype.stop=function(){};a("layout","breadthfirst",d)})(cytoscape);