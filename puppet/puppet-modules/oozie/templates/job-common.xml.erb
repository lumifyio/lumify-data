<!-- Common configurations for our MR jobs go here! -->
<configuration>
    <property>
        <name>zookeeperInstanceName</name>
        <value>lumify</value>
    </property>
    <property>
        <name>zookeeperServerNames</name>
        <value><%= @zookeeper_nodes.values.join(',') %></value>
    </property>
    <property>
        <name>username</name>
        <value>root</value>
    </property>
    <property>
        <name>password</name>
        <value>password</value>
    </property>
    <property>
        <name>hadoopUrl</name>
        <value>hdfs://<%= @hadoop_masters[0] %>:8020</value>
    </property>
    <property>
        <name>blurControllerLocation</name>
        <value><%= @hadoop_masters[0] %>:40010</value>
    </property>
    <property>
        <name>blurPath</name>
        <value>hdfs://<%= @hadoop_masters[0] %>:8020/blur</value>
    </property>
    <property>
        <name>graph.storage.index.search.hostname</name>
        <value><%= @elasticsearch_locations.map { |l| l.split(':')[0] }.join(',') %></value>
    </property>
    <property>
        <name>mapreduce.outputformat.class</name>
        <value>com.altamiracorp.lumify.model.AccumuloModelOutputFormat</value>
    </property>
    <property>
        <name>mapred.map.tasks</name>
        <value><%= @hadoop_slaves.count %></value>
    </property>
    <property>
        <name>mapred.reduce.tasks</name>
        <value>0</value>
    </property>
    <property>
        <name>mapred.child.java.opts</name>
        <value>-Xms1024M -Xmx1024M -XX:MaxPermSize=512M</value>
    </property>
    <property>
        <name>fs.hdfs.impl</name>
        <value>org.apache.hadoop.hdfs.DistributedFileSystem</value>
    </property>
    <property>
       <name>elasticsearch.locations</name>
       <value><%= @elasticsearch_locations.join(',') %></value>
    </property>
</configuration>
